<!documentTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no">
        <title>项目详情</title>
        <link href="../../css/mui.min.css" rel="stylesheet" />
        <link href="../../css/mui.picker.min.css" rel="stylesheet" />
        <link href="../../css/base.css" rel="stylesheet" />
        <style type="text/css">
            .box {
                display: none;
            }
        </style>
    </head>
    <body>
    <div id="step">
        <header class='header'>
            <img src="../../images/svg/left.svg" class="icon-40" @click="goBack()" />
            <span class='tit'>项目详情</span>
            <i></i>
        </header>
        <div class="wrap box" id="min10">
            <ul class='wrap-list'>
                <li>
                    <div class='tit'>
                        项目名称
                    </div>
                    <div class='con'>
                        <div class="flex-1">
                            <p>
                                {{ show.productName }}
                            </p>
                            <a class="a box" id="min10Detail" @click="goDetail()">详细</a>
                        </div>
                    </div>
                </li>
                <li class="box" id="min20">
                    <div class='tit'>
                        经营专员
                    </div>
                    <div class='con'>
                        <div class="flex-1">
                            <input type="text" class='input' :value="show.managementPersonnel" readonly />
                            <a class="a" @click="goto('record.html')">记录</a>
                         </div>
                    </div>
                </li>
            </ul>
        </div>
        <div class="wrap box" id="min40">
            <h4>
                <span>技术负责人</span>
            </h4>
            <ul class='wrap-list'>
                <li>
                    <div class='tit'>
                        <div id="isMajorProject">
                            <span style="display: none;">重点项目</span>
                            <span style="display: none;">非重点项目</span>
                        </div>
                    </div>
                    <div class='con'>

                    </div>
                </li>
                <li>
                    <div class='tit'>
                        姓名
                    </div>
                    <div class='con'>
                        <div class="flex-1">
                            <input type="text" id="projectLeader" placeholder="请输入姓名" class='input' readonly />
                            <a class="a box" id="min40Detail" @click="projectWork()">汇报</a>
                        </div>
                    </div>
                </li>
                <li class='box' id="min40Other">
                    <div class='tit'>
                        计划
                    </div>
                    <div class='con'>
                        <textarea id="schemaContent" readonly></textarea>
                    </div>
                </li>
            </ul>
        </div>
        <div class="wrap box wrap-tab-box">
            <h4>
                <span>分类信息</span>
            </h4>
            <ul class='wrap-tab'>
                <li>招标信息</li>
                <li>投标信息</li>
                <li>合同信息</li>
                <li>方案信息</li>
            </ul>
        </div>
        <div class="wrap box equal370">
            <h4 v-if="role == 1 || role == 2 || role == 3 || role == 5 || personnelNature == 44 || role == 7 || role == 8 || role == 10 || role == 9 || role == 11">
                <span>合同拟定版</span><p class="downLoad-9"></p>
            </h4>
            <h4 v-if="role == 4">
                <span>合同</span><p class="downLoad-10"></p>
            </h4>
            <ul v-if="role == 4" class='wrap-list' id="contract-box">
                <li>
                    <div class='tit'>
                        合同编号
                    </div>
                    <div class='con'>
                        <input type="text" id='contract_no' class='input' readonly />
                    </div>
                </li>
                <li>
                    <div class='tit'>
                        项目名称
                    </div>
                    <div class='con'>
                        <!-- <input type="text" id="name" class='input' readonly /> -->
                        <textarea id="name" readonly style="min-height: auto; border: 0; text-align: right; color: #666;"></textarea>
                    </div>
                </li>
                <li>
                    <div class='tit'>
                        合同金额(万元)
                    </div>
                    <div class='con'>
                        <input type="text" id="contract_capital" class='input' readonly />
                    </div>
                </li>
                <li>
                    <div class='tit'>
                        签约日期
                    </div>
                    <div class='con'>
                        <button id='sign_date' data-options='{"type":"date"}' class="simulation-select one">请选择日期</button>
                        <!-- <input type="text"  class='input' id="sign_date" readonly  /> -->
                    </div>
                </li>
                <li>
                    <div class='tit'>
                        发包单位
                    </div>
                    <div class='con'>
                        <!-- <input type="text" id="contractAwardCompany" class='input' readonly /> -->
                        <span class="simulation-select one" id="contractAwardCompany" disabled='disabled'>请选择</span>
                    </div>
                </li>
                <li>
                    <div class='tit'>
                        类别
                    </div>
                    <div class='con'>
                        <span class="simulation-select one" id="category" disabled='disabled'>请选择</span>
                        <!-- <input type="text" id="category" class='input' readonly /> -->
                    </div>
                </li>
                <li>
                    <div class='tit'>
                        类型
                    </div>
                    <div class='con'>
                        <span class="simulation-select one" id="type" disabled='disabled'>请选择</span>
                        <!-- <input type="text" id="type" class='input' readonly /> -->
                    </div>
                </li>
                <li>
                    <div class='tit'>
                        所在城市
                    </div>
                    <div class='con'>
                        <!-- <input type="text" id="cityId"  class='input' readonly /> -->
                        <button id='cityId' class="mui-btn mui-btn-block simulation-select one">请选择</button>
                    </div>
                </li>
                <li>
                    <div class='tit'>
                    </div>
                    <div class='con'>
                        <input type="text" id="address"  class='input' style="width: 9rem;" readonly />
                    </div>
                </li>
                <li>
                    <div class='tit'>
                        设计面积(㎡)
                    </div>
                    <div class='con'>
                        <input type="text" id="designArea" class='input' readonly />
                    </div>
                </li>
                <li>
                    <div class='tit'>
                        投资额(万元)
                    </div>
                    <div class='con'>
                        <input type="text" class='input' id="investmentMount" readonly />
                    </div>
                </li>
                <li>
                    <div class='tit'>
                        设计阶段
                    </div>
                    <div class='con'>
                        <div>
                            <div class="mui-input-row mui-checkbox mui-left">
                                <label>方案设计</label>
                                <input type="checkbox" id="haveScheme" disabled />
                            </div>
                            <div class="mui-input-row mui-checkbox mui-left">
                                <label>扩初方案设计</label>
                                <input type="checkbox" id="haveDevelopment" disabled />
                            </div>
                            <div class="mui-input-row mui-checkbox mui-left">
                                <label>施工图设计及后期服务</label>
                                <input type="checkbox" id="haveDrawing" disabled />
                            </div>
                            <div class="mui-input-row mui-checkbox mui-left">
                                <label>规划设计</label>
                                <input type="checkbox" id="havePlanning" disabled />
                            </div>
                        </div>
                    </div>
                </li>
                <li>
                    <div class='tit'>
                        付款方式(万元)
                    </div>
                    <div class='con'>
                        <div class="flex-11">
                            <b id="add-paytype" v-if='role == 4'>+添加付款方式</b>
                            <dl id='payType'></dl>
                        </div>
                    </div>
                </li>
                <li>
                    <div class='tit'>
                        备注
                    </div>
                    <div class='con'>
                        <textarea id="contractMemo" readonly>备注</textarea>
                    </div>
                </li>
            </ul>
        </div>
        <div class="wrap box equal380">
            <h4>
                <span>院所费用比例</span>
            </h4>
            <ul class='wrap-list' v-if="show.fb.name && show.fb.memo">
                <li v-if="show.fb.name">
                    <div class='tit tips'>
                        {{ show.fb.name }}
                    </div>
                    <div class='con'>
                        <input type="text" class='input tips' :value="show.fb.time" disabled />
                    </div>
                </li>
                <li v-if="show.fb.memo">
                    <div class='tit tips'>
                        理由
                    </div>
                    <div class='con'>
                        <textarea class="tips" disabled>{{ show.fb.memo }}</textarea>
                    </div>
                </li>
            </ul>
            <ul class='wrap-list'>
                <li>
                    <div class='tit'>
                        院方比例(%)
                    </div>
                    <div class='con'>
                        <input type="number" id="ratio" placeholder="请输入院方比例" class="input" />
                    </div>
                </li>
                <li>
                    <div class='tit'>
                        备注
                    </div>
                    <div class='con'>
                        <textarea id="ratio_memo" placeholder="请输入备注信息"></textarea>
                    </div>
                </li>
            </ul>
        </div>
        <div class="wrap box equal380">
            <h4>
                <span>分包团队金额</span>
                <p>
                    <a href="javascript:void(0);" class="a" id="team-add" v-if='role == 5 || personnelNature == 44'>追加</a>
                </p>
            </h4>
            <div class="flex-6">
                <dl id='pack'></dl>
            </div>
        </div>
        <div class="wrap box equal380">
            <h4>
                <span>开票到账情况</span>
            </h4>
            <div class="flex-7" id="cashierConfirmation"></div>
        </div>
        <div class="wrap box equal400">
            <h4>
                <span>方案设计初稿</span><p class="downLoad-11"></p>
            </h4>
        </div>
        <div class="wrap box equal420">
            <h4>
                <span>方案设计</span><p class="downLoad-12"></p>
            </h4>
        </div>
         <div class="wrap box equal430">
            <h4>
                <span>扩初方案初稿</span><p class="downLoad-14"></p>
            </h4>
        </div>
        <div class="wrap box equal450">
            <h4>
                <span>扩初方案设计</span><p class="downLoad-15"></p>
            </h4>
        </div>
        <div class="wrap box equal460">
            <h4>
                <span>施工图初稿</span><p class="downLoad-17"></p>
            </h4>
        </div>
        <div class="wrap box equal480">
            <h4>
                <span>施工图设计</span><p class="downLoad-18"></p>
            </h4>
        </div>
        <div class="wrap box equal490">
            <h4>
                <span>规划设计初稿</span><p class="downLoad-20"></p>
            </h4>
        </div>
        <div class="wrap box equal510">
            <h4>
                <span>规划设计</span><p class="downLoad-21"></p>
            </h4>
        </div>
        <div class="wrap box equal520">
            <h4>
                <span>竣工报告</span><p class="downLoad-24"></p>
            </h4>
        </div>
        <div class="wrap box equal10">
            <h4>
                <span>项目录入</span>
            </h4>
            <ul class='wrap-list'>
                <li>
                    <div class='tit'>
                        项目名称
                    </div>
                    <div class='con'>
                        <div class="flex-1">
                            <p>
                                {{ show.productName }}
                            </p>
                            <a class="a box equal10Detail" @click="goto('detail.html')">录入</a>
                        </div>
                    </div>
                </li>

            </ul>
        </div>
        <div class="wrap box equal20">
            <h4>
                <span>项目立项</span>
            </h4>
            <ul class='wrap-list'>
                <li>
                    <div class='tit'>
                        <div class="mui-input-row mui-radio mui-left">
                            <label>通过</label>
                            <input type="radio" name="passed-1" value="1" checked />
                        </div>
                    </div>
                    <div class='con'>
                        <div class="flex-8">
                            <dl>
                                <dd>
                                    <span>经营专员</span>
                                    <span class="simulation-select one" id="managementPersonnel">请选择经营专员</span>
                                </dd>
                                <dd>
                                    <span>技术负责人</span>
                                </dd>
                                <dd>
                                    <div class="mui-input-row mui-checkbox mui-left">
                                        <label>建议</label>
                                        <input type="checkbox" name="proposerId" checked />
                                    </div>
                                    <span class="simulation-select one" id="proposerId">请选择建议人</span>
                                </dd>
                                <dd>
                                    <div class="mui-input-row mui-checkbox mui-left">
                                        <label>邀请</label>
                                        <input type="checkbox" name="inviterIds" checked />
                                    </div>
                                    <span class="simulation-select one" id="inviterIds">请选择邀请人</span>
                                </dd>
                                <dd>
                                    <span>截至日期</span>
                                    <button id='applyDeadline' data-options='{"type":"date"}' class="simulation-select one">请选择申请截止日期</button>
                                </dd>
                            </dl>
                        </div>
                    </div>
                </li>
                <li>
                    <div class='tit'>
                        <div class="mui-input-row mui-radio mui-left">
                            <label>不通过</label>
                            <input type="radio" name="passed-1" value="2" />
                        </div>
                    </div>
                    <div class='con'>
                        <textarea placeholder="不通过理由" id="reason" readonly></textarea>
                    </div>
                </li>
            </ul>
        </div>
        <div class="wrap box equal20">
            <input type="button" id="submit" @click="step20Submit()" value='提交' class='btn btn-max' />
        </div>
        <div class="wrap box equal30">
            <h4>
                <span>负责人反馈</span>
            </h4>
            <ul class='wrap-list'>
                <li>
                    <div class="tit">
                        截止日期
                    </div>
                    <div class="con">
                        <span class="simulation-select one" id="applyDeadline">截止日期</span>
                    </div>
                </li>
                <li>
                    <div class='tit'>
                       是否申请
                    </div>
                    <div class='con'>
                        <div class="flex-9">
                            <div class="mui-input-row mui-radio mui-left">
                                <label>申请（项目计划）</label>
                                <input type="radio" name="passed-2" value="1" checked />
                            </div>
                            <textarea id="content" placeholder="请输入项目计划"></textarea>
                            <br><br><p>*计划包括项目成本，工期以及团队人员等</p><br><br>
                            <div class="mui-input-row mui-radio mui-left">
                                <label>不申请</label>
                                <input type="radio" name="passed-2" value="2" />
                            </div>
                            <textarea id="reason" placeholder="请输入不申请理由" readonly></textarea>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
        <div class="wrap box equal30">
            <input type="button" id="submit" @click="step30Submit()" value='确定' class='btn btn-max' />
        </div>
        <div class="wrap box equal40">
            <h4>
                <span>确立负责人</span>
            </h4>
            <ul class='wrap-list' id='step40'>
                <li>
                    <div class="tit">
                        <div class="mui-input-row mui-checkbox mui-left">
                            <label>重点项目</label>
                            <input type="checkbox" id="status" />
                        </div>
                    </div>
                    <div class="con"></div>
                </li>
                <li>
                    <div class="tit">
                        截止日期
                    </div>
                    <div class="con">
                        <input type="text" id="applyDeadline" maxlength="8" class="input" readonly />
                    </div>
                </li>
                <li>
                    <div class='tit'>
                        <div class="mui-input-row mui-radio mui-left">
                            <label>通过</label>
                            <input type="radio" name="passed-3" value="1" checked />
                        </div>
                    </div>
                    <div class='con'>
                    </div>
                </li>
                <li>
                    <div class="flex-10">
                        <div>
                            <dl id="leaderList"></dl>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <div class="mui-input-row mui-radio mui-left">
                                <label>直接指定</label>
                                <input type="radio" name="proposerId" value="" id="people-radio" />
                            </div>
                            <span class="simulation-select one" id="people" disabled>选择指定人员</span>
                        </div>
                        <div style="margin-top: 10px;">
                            <textarea placeholder="请输入项目计划" id="content" readonly></textarea>
                        </div>
                    </div>
                </li>
                <li>
                    <div class='tit'>
                        <div class="mui-input-row mui-radio mui-left">
                            <label>不通过</label>
                            <input type="radio" name="passed-3" value="2" />
                        </div>
                    </div>
                    <div class='con'>
                        <textarea placeholder="不通过理由" id="reason" readonly></textarea>
                    </div>
                </li>
            </ul>
        </div>
        <div class="wrap box equal40">
            <input type="button" id="submit" @click="step40Submit()" value='确定' class='btn btn-max' />
        </div>
        <div class="wrap box equal50">
            <h4>
                <span>招标公告</span><p class="downLoad-1"></p>
            </h4>
            <ul class='wrap-list'>
                <li>
                    <div class='tit'>
                        报名截止日期
                    </div>
                    <div class='con'>
                        <button id='deadline' data-options='{"type":"date"}' class="simulation-select one">请选择申请截止日期</button>
                    </div>
                </li>
                <li>
                    <div class='tit'>
                        备注
                    </div>
                    <div class='con'>
                        <textarea id="memo" placeholder="请输入备注"></textarea>
                    </div>
                </li>
            </ul>
        </div>
        <div class="wrap box equal50">
            <input type="button" id="submit" @click="step50Submit()" value='提交' class='btn btn-max' />
        </div>
        <div class="wrap box equal60">
            <h4>
                <span>上传报名拟定</span><p class="downLoad-2"></p>
            </h4>
            <ul class='wrap-list' v-if="show.bmnd.name && show.bmnd.memo">
                <li v-if="show.bmnd.name">
                    <div class='tit tips'>
                        {{ show.bmnd.name }}
                    </div>
                    <div class='con'>
                        <input type="text" class='input tips' :value="show.bmnd.time" disabled />
                    </div>
                </li>
                <li v-if="show.bmnd.memo">
                    <div class='tit tips'>
                        理由
                    </div>
                    <div class='con'>
                        <textarea class="tips" disabled>{{ show.bmnd.memo }}</textarea>
                    </div>
                </li>
            </ul>
        </div>
        <div class="wrap box equal60">
            <input type="button" id="submit" @click="step60Submit()" value='提交' class='btn btn-max' />
        </div>
        <div class="wrap box equal70">
            <input type="button" value='通过' class='btn btn-max' @click="step70SubmitTrue()" />
        </div>
        <div class="wrap box equal70">
            <input type="button" value='不通过' class='btn btn-max' @click="step70SubmitFalse()" />
        </div>
        <div class="wrap box equal80">
            <input type="button" value='通过' class='btn btn-max' @click="step80SubmitTrue()" />
        </div>
        <div class="wrap box equal80">
            <input type="button" value='不通过' class='btn btn-max' @click="step80SubmitFalse()" />
        </div>
        <div class="wrap box equal90">
            <input type="button" value='盖章' class='btn btn-max' @click="step90Submit()" />
        </div>
        <div class="wrap box equal100">
            <h4>
                <span>上传报名文件</span><p class="downLoad-3"></p>
            </h4>
            <ul class='wrap-list'>
                <li>
                    <div class='tit'>
                        报名文件制作人
                    </div>
                    <div class='con'>
                        <span class="simulation-select one" id="people">选择报名文件制作人</span>
                    </div>
                </li>
                <li>
                    <div class='tit'>
                        报名结果
                    </div>
                    <div class='con'>
                        <div>
                            <div>
                                <div class="mui-input-row mui-radio mui-left">
                                    <label>成功</label>
                                    <input type="radio" name="status" value="1" checked />
                                </div>
                            </div>
                            <div>
                                <div class="mui-input-row mui-radio mui-left">
                                    <label>不成功</label>
                                    <input type="radio" name="status" value="0" />
                                </div>
                                <span class="simulation-select one" id="failResult" disabled>选择不成功原因</span>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
        <div class="wrap box equal100">
            <input type="button" id="submit" @click="step100Submit()" value='提交' class='btn btn-max' />
        </div>
        <div class="wrap box equal110">
            <h4>
                <span>招标文件</span><p class="downLoad-4"></p>
            </h4>
            <ul class='wrap-list' id="zb-box">
                <li>
                    <div class='tit'>
                        <div class="mui-input-row mui-checkbox mui-left">
                            <label>技术标</label>
                            <input type="checkbox" name="status" />
                        </div>
                    </div>
                    <div class='con'>

                    </div>
                </li>
                <li>
                    <div class='tit'>
                        保证金截止日期
                    </div>
                    <div class='con'>
                        <button id='marginDeadline' data-options='{"type":"date"}' class="simulation-select one">请选择保证金截止日期</button>
                    </div>
                </li>
                <li>
                    <div class='tit'>
                        投标截止日期
                    </div>
                    <div class='con'>
                        <button id='tenderDeadline' data-options='{"type":"date"}' class="simulation-select one">请选择投标截止日期</button>
                    </div>
                </li>
                <li>
                    <div class='tit'>
                        备注
                    </div>
                    <div class='con'>
                        <textarea placeholder="请输入备注内容" id="memo"></textarea>
                    </div>
                </li>
            </ul>
        </div>
        <div class="wrap box equal110">
            <input type="button" id="submit" @click="step110Submit()" value='提交' class='btn btn-max' />
        </div>
        <div class="wrap box equal120">
            <h4>
                <span>保证金</span>
            </h4>
            <ul class='wrap-list'>
                <li v-if="show.bzj.name">
                    <div class='tit tips'>
                        {{ show.bzj.name }}
                    </div>
                    <div class='con'>
                        <input type="text" class='input tips' :value="show.bzj.time" disabled />
                    </div>
                </li>
                <li v-if="show.bzj.memo">
                    <div class='tit tips'>
                        理由
                    </div>
                    <div class='con'>
                        <textarea class="tips" disabled>{{ show.bzj.memo }}</textarea>
                    </div>
                </li>
                <li>
                    <div class='tit'>
                        保证金(万元)
                    </div>
                    <div class='con'>
                        <div v-if='!show.bail'>
                            <input type="text" id="bail" class='input' placeholder="请输入保证金" />
                        </div>
                        <div v-else>
                            <input type="text" id="bail" class='input' :value="show.bail" />
                        </div>
                    </div>
                </li>
                <li>
                    <div class='tit'>
                        最晚汇款日期
                    </div>
                    <div class='con'>
                        <div v-if='!show.latestRemittanceDate'>
                            <button id='latestRemittanceDate' data-options='{"type":"date"}' class="simulation-select one">最晚汇款日期</button>
                        </div>
                        <div v-else>
                            <button id='latestRemittanceDate' data-options='{"type":"date"}' class="simulation-select one">{{ show.latestRemittanceDate }}</button>
                        </div>
                    </div>
                </li>
                <li>
                    <div class='tit'>
                        汇款单位
                    </div>
                    <div class='con'>
                        <div v-if='!show.remittanceCompany'>
                            <input type="text" id="remittanceCompany" class='input' placeholder="请输入汇款单位" />
                        </div>
                        <div v-else>
                            <input type="text" id="remittanceCompany" :value="show.remittanceCompany" class='input' />
                        </div>
                    </div>
                </li>
                <li>
                    <div class='tit'>
                        开户行
                    </div>
                    <div class='con'>
                        <div v-if='!show.bankName'>
                            <input type="text" id="bankName" placeholder="请输入开户行" class='input' />
                        </div>
                        <div v-else>
                            <input type="text" id="bankName" :value="show.bankName" class='input' />
                        </div>
                    </div>
                </li>
                <li>
                    <div class='tit'>
                        账号
                    </div>
                    <div class='con'>
                        <div v-if='!show.accountNo'>
                            <input type="text" id="accountNo" placeholder="请输入账号" class='input' />
                        </div>
                        <div v-else>
                            <input type="text" id="accountNo" :value="show.accountNo" class='input' />
                        </div>
                    </div>
                </li>
                <li>
                    <div class='tit'>
                        备注
                    </div>
                    <div class='con'>
                        <div v-if='!show.bailMemo'>
                            <textarea id="bailMemo" placeholder="请输入备注"></textarea>
                        </div>
                        <div v-else>
                            <textarea id="bailMemo">{{ show.bailMemo }}</textarea>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
        <div class="wrap box equal120">
            <input type="button" id="submit" @click="step120Submit()" value='申请' class='btn btn-max' />
        </div>
        <div class="wrap box equal130">
            <input type="button" value='通过' class='btn btn-max' @click="step130SubmitTrue()" />
        </div>
        <div class="wrap box equal130">
            <input type="button" value='不通过' class='btn btn-max' @click="step130SubmitFalse()" />
        </div>
        <div class="wrap box equal140">
            <input type="button" value='通过' class='btn btn-max' @click="step140SubmitTrue()" />
        </div>
        <div class="wrap box equal140">
            <input type="button" value='不通过' class='btn btn-max' @click="step140SubmitFalse()" />
        </div>
        <div class="wrap box equal150">
            <input type="button" value='通过' class='btn btn-max' @click="step150SubmitTrue()" />
        </div>
        <div class="wrap box equal150">
            <input type="button" value='不通过' class='btn btn-max' @click="step150SubmitFalse()" />
        </div>
        <div class="wrap box equal160">
            <input type="button" value='通过' class='btn btn-max' @click="step160SubmitTrue()" />
        </div>
        <div class="wrap box equal160">
            <input type="button" value='不通过' class='btn btn-max' @click="step160SubmitFalse()" />
        </div>
        <div class="wrap box equal170">
            <input type="button" value='打款' class='btn btn-max' @click="step170Submit()" />
        </div>
        <div class="wrap box equal190">
            <h4>
                <span>商务标拟定</span><p class="downLoad-5"></p>
            </h4>
            <ul class='wrap-list' v-if="show.swb.name && show.swb.memo">
                <li v-if="show.swb.name">
                    <div class='tit tips'>
                        {{ show.swb.name }}
                    </div>
                    <div class='con'>
                        <input type="text" class='input tips' :value="show.swb.time" disabled />
                    </div>
                </li>
                <li v-if="show.swb.memo">
                    <div class='tit tips'>
                        理由
                    </div>
                    <div class='con'>
                        <textarea class="tips" disabled>{{ show.swb.memo }}</textarea>
                    </div>
                </li>
            </ul>
        </div>
        <div class="wrap box equal190">
            <input type="button" id="submit" @click="step190Submit()" value='提交' class='btn btn-max' />
        </div>
        <div class="wrap box equal200">
            <input type="button" value='通过' class='btn btn-max' @click="step200SubmitTrue()" />
        </div>
        <div class="wrap box equal200">
            <input type="button" value='不通过' class='btn btn-max' @click="step200SubmitFalse()" />
        </div>
        <div class="wrap box equal210">
            <input type="button" value='通过' class='btn btn-max' @click="step210SubmitTrue()" />
        </div>
        <div class="wrap box equal210">
            <input type="button" value='不通过' class='btn btn-max' @click="step210SubmitFalse()" />
        </div>
        <div class="wrap box equal220">
            <input type="button" value='通过' class='btn btn-max' @click="step220SubmitTrue()" />
        </div>
        <div class="wrap box equal220">
            <input type="button" value='不通过' class='btn btn-max' @click="step220SubmitFalse()" />
        </div>
        <div class="wrap box equal230">
            <input type="button" value='盖章' class='btn btn-max' @click="step230Submit()" />
        </div>
        <div class="wrap box equal240">
            <h4>
                <span>拟定技术标</span><p class="downLoad-7"></p>
            </h4>
            <ul class='wrap-list' v-if="show.jsb.name && show.jsb.memo">
                <li v-if="show.jsb.name">
                    <div class='tit tips'>
                        {{ show.jsb.name }}
                    </div>
                    <div class='con'>
                        <input type="text" class='input tips' :value="show.jsb.time" disabled />
                    </div>
                </li>
                <li v-if="show.jsb.memo">
                    <div class='tit tips'>
                        理由
                    </div>
                    <div class='con'>
                        <textarea class="tips" disabled>{{ show.jsb.memo }}</textarea>
                    </div>
                </li>
            </ul>
        </div>
        <div class="wrap box equal240">
            <input type="button" value='提交' class='btn btn-max' @click="step240Submit()" />
        </div>
        <div class="wrap box equal250">
            <input type="button" value='通过' class='btn btn-max' @click="step250SubmitTrue()" />
        </div>
        <div class="wrap box equal250">
            <input type="button" value='不通过' class='btn btn-max' @click="step250SubmitFalse()" />
        </div>
        <div class="wrap box equal260">
            <input type="button" value='通过' class='btn btn-max' @click="step260SubmitTrue()" />
        </div>
        <div class="wrap box equal260">
            <input type="button" value='不通过' class='btn btn-max' @click="step260SubmitFalse()" />
        </div>
        <div class="wrap box equal270">
            <input type="button" value='盖章' class='btn btn-max' @click="step270Submit()" />
        </div>
        <div class="wrap box equal280">
            <h4>
                <span>商务标</span><p class="downLoad-6"></p>
            </h4>
            <ul class='wrap-list'>
                <li>
                    <div class='tit'>
                        商务标制作人
                    </div>
                    <div class='con'>
                        <span class="simulation-select one" id="businessProducer">请选择商务标制作人</span>
                    </div>
                </li>
                <li>
                    <div class='tit'>
                        投标报价(万元)
                    </div>
                    <div class='con'>
                        <input type="number" id="tenderOffer" class='input' placeholder="请输入投保报价" />
                    </div>
                </li>
            </ul>
        </div>
        <div class="wrap box equal280T">
            <h4>
                <span>技术标</span><p class="downLoad-8"></p>
            </h4>
        </div>
        <div class="wrap box equal280">
            <input type="button" value='提交' class='btn btn-max' @click="step280Submit()" />
        </div>
        <div class="wrap box equal290">
            <h4>
                <span>开标信息</span><p><a href="javascript:void(0);" class="a" id="add-bid" v-if='role == 4'>追加</a></p>
            </h4>
            <div class="flex-3">
                <ul id="bidList"></ul>
            </div>
            <div>
                <ul class='wrap-list'>
                    <li>
                        <div class='tit'>
                            是否中标
                        </div>
                        <div class='con'>
                            <div class="mui-input-row mui-radio mui-left">
                                <label>中标</label>
                                <input type="radio" name="bid" value="1" checked />
                            </div>
                            <div class="mui-input-row mui-radio mui-left">
                                <label>未中标</label>
                                <input type="radio" name="bid" value="2" />
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
        <div class="wrap box equal290">
            <input type="button" value='提交' class='btn btn-max' @click="step290Submit()" />
        </div>
        <div class="wrap box equal300">
            <h4>
                <span>合同拟定版</span><p class="downLoad-9"></p>
            </h4>
            <ul class='wrap-list' v-if="show.ht.name && show.ht.memo">
                <li v-if="show.ht.name">
                    <div class='tit tips'>
                        {{ show.ht.name }}
                    </div>
                    <div class='con'>
                        <input type="text" class='input tips' :value="show.ht.time" disabled />
                    </div>
                </li>
                <li v-if="show.ht.memo">
                    <div class='tit tips'>
                        理由
                    </div>
                    <div class='con'>
                        <textarea class="tips" disabled>{{ show.ht.memo }}</textarea>
                    </div>
                </li>
            </ul>
        </div>
        <div class="wrap box equal300">
            <input type="button" value='提交' class='btn btn-max' @click="step300Submit()" />
        </div>
        <div class="wrap box equal310">
            <input type="button" value='通过' class='btn btn-max' @click="step310SubmitTrue()" />
        </div>
        <div class="wrap box equal310">
            <input type="button" value='不通过' class='btn btn-max' @click="step310SubmitFalse()" />
        </div>
        <div class="wrap box equal315">
            <input type="button" value='通过' class='btn btn-max' @click="step315SubmitTrue()" />
        </div>
        <div class="wrap box equal315">
            <input type="button" value='不通过' class='btn btn-max' @click="step315SubmitFalse()" />
        </div>
        <div class="wrap box equal320">
            <input type="button" value='通过' class='btn btn-max' @click="step320SubmitTrue()" />
        </div>
        <div class="wrap box equal320">
            <input type="button" value='不通过' class='btn btn-max' @click="step320SubmitFalse()" />
        </div>
        <div class="wrap box equal330">
            <input type="button" value='通过' class='btn btn-max' @click="step330SubmitTrue()" />
        </div>
        <div class="wrap box equal330">
            <input type="button" value='不通过' class='btn btn-max' @click="step330SubmitFalse()" />
        </div>
        <div class="wrap box equal340">
            <input type="button" value='通过' class='btn btn-max' @click="step340SubmitTrue()" />
        </div>
        <div class="wrap box equal340">
            <input type="button" value='不通过' class='btn btn-max' @click="step340SubmitFalse()" />
        </div>
        <div class="wrap box equal350">
            <input type="button" value='通过' class='btn btn-max' @click="step350SubmitTrue()" />
        </div>
        <div class="wrap box equal350">
            <input type="button" value='不通过' class='btn btn-max' @click="step350SubmitFalse()" />
        </div>
        <div class="wrap box equal360">
            <input type="button" value='盖章' class='btn btn-max' @click="step360Submit()" />
        </div>
        <div class="wrap box equal370">
            <input type="button" value='提交' class='btn btn-max' @click="step370Submit()"  />
        </div>
        <div class="wrap box equal380">
            <input type="button" value='提交' class='btn btn-max' @click="step380Submit()"  />
        </div>
        <div class="wrap box equal390">
            <input type="button" value='通过' class='btn btn-max' @click="step390SubmitTrue()" />
        </div>
        <div class="wrap box equal390">
            <input type="button" value='不通过' class='btn btn-max' @click="step390SubmitFalse()" />
        </div>
        <div class="wrap box equal400">
            <input type="button" value='提交' class='btn btn-max' @click="step400Submit()" />
        </div>
        <div class="wrap box equal410">
            <input type="button" value='通过' class='btn btn-max' @click="step410SubmitTrue()" />
        </div>
        <div class="wrap box equal410">
            <input type="button" value='不通过' class='btn btn-max' @click="step410SubmitFalse()" />
        </div>
        <div class="wrap box equal420">
            <input type="button" value='提交' class='btn btn-max' @click="step420Submit()" />
        </div>
        <div class="wrap box equal430">
            <input type="button" value='提交' class='btn btn-max' @click="step430Submit()" />
        </div>
        <div class="wrap box equal440">
            <input type="button" value='通过' class='btn btn-max' @click="step440SubmitTrue()" />
        </div>
        <div class="wrap box equal440">
            <input type="button" value='不通过' class='btn btn-max' @click="step440SubmitFalse()" />
        </div>
        <div class="wrap box equal450">
            <input type="button" value='提交' class='btn btn-max' @click="step450Submit()" />
        </div>
        <div class="wrap box equal460">
            <input type="button" value='提交' class='btn btn-max' @click="step460Submit()" />
        </div>
        <div class="wrap box equal470">
            <input type="button" value='通过' class='btn btn-max' @click="step470SubmitTrue()" />
        </div>
        <div class="wrap box equal470">
            <input type="button" value='不通过' class='btn btn-max' @click="step470SubmitFalse()" />
        </div>
        <div class="wrap box equal480">
            <input type="button" value='提交' class='btn btn-max' @click="step480Submit()" />
        </div>
        <div class="wrap box equal490">
            <input type="button" value='提交' class='btn btn-max' @click="step490Submit()" />
        </div>
        <div class="wrap box equal500">
            <input type="button" value='通过' class='btn btn-max' @click="step500SubmitTrue()" />
        </div>
        <div class="wrap box equal500">
            <input type="button" value='不通过' class='btn btn-max' @click="step500SubmitFalse()" />
        </div>
        <div class="wrap box equal510">
            <input type="button" value='提交' class='btn btn-max' @click="step510Submit()" />
        </div>
        <div class="wrap box equal520">
            <input type="button" value='提交' class='btn btn-max' @click="step520Submit()" />
        </div>
        <div class='select-dialog'>
            <div class='select-mask'></div>
            <div class='select-content'>
                <div class="select-title">
                    <span id="cancel">取消</span>
                    <span id="true">确定</span>
                </div>
                <ul></ul>
            </div>
        </div>
    </div>
    </body>
    <script src="../../js/mui.min.js"></script>
    <script src="../../js/jquery.js"></script>
    <script src="../../js/vue.js"></script>
    <script src="../../js/mui.picker.js"></script>
    <script src="../../js/mui.poppicker.js"></script>
    <script src="../../js/mui.picker.min.js"></script>
    <script src="../../js/common.min.js?v.7"></script>
    <script type="text/javascript">
        var step = new Vue({
            el: "#step",
            data: {
                step : myGetLocalStorage("step"),
                productId: myGetLocalStorage("productId"),
                productPage: myGetLocalStorage("productPage"),
                branch: myGetLocalStorage("branch"),
                role : JSON.parse(myGetLocalStorage("user")).jobId,
                personnelNature: JSON.parse(myGetLocalStorage("user")).personnelNature,
                examineFlag: myGetLocalStorage("examineFlag"),
                id: "",
                companyId: "",
                companyName: "",
                projectId: "",
                fileName: "",
                fileUrl: "",
                listStep: "",
                subStep: "",
                subStep2: "",
                isMajorProject: "",
                haveTechnical: "",
                haveDevelopment: "",
                haveDrawing: "",
                havePlanning: "",
                haveScheme: "",
                intentionalCooperation: "",
                obj : {},
                projectLeader : "",
                contractPayment: "",
                // 用于页面显示值
                show: {
                    productName : "",
                    managementPersonnel: "",
                    bail : "",
                    latestRemittanceDate : "",
                    remittanceCompany : "",
                    bankName : "",
                    accountNo : "",
                    bailMemo : "",
                    bmnd : { // 报名拟定
                        name: "",
                        time: "",
                        memo: ""
                    },
                    bzj : { // 保证经
                        name: "",
                        time: "",
                        memo: ""
                    },
                    swb : { // 商务标
                        name: "",
                        time: "",
                        memo: ""
                    },
                    jsb : { // 技术标
                        name: "",
                        time: "",
                        memo: ""
                    },
                    ht : { // 合同
                        name: "",
                        time: "",
                        memo: ""
                    },
                    fb : { // 分包
                        name: "",
                        time: "",
                        memo: ""
                    },
                    kp : { // 开票
                        name: "",
                        time: "",
                        memo: ""
                    },
                    xmzc : { // 项目支出
                        name: "",
                        time: "",
                        memo: ""
                    }
                }
            },
            omputed : {},
            methods: {
                init: function () {

                },
                goBack : function () {
                    var historyUrl = myGetLocalStorage("curr");
                    if (historyUrl) {
                        myOpenWindow(historyUrl, '');
                        myRemoveLocalStorage("examineFlag");
                    } else {
                        myOpenWindow("list.html", '');
                    }
                },
                goDetail : function () {
                    zjzm.historyUrl("/tpl/product/step-tab.html");
                    myOpenWindow("/tpl/product/detail.html", '');
                },
                goto: function (url) {
                    myOpenWindow(url, '');
                },
                // 获取详情
                getProduct: function (name) {
                    var that = this
                    myLoading();
                    var param = [this.productId];
                    mui.ajax(global.apiURL + '/project/user/list.htm', {
                        data : {
                            id : param[0]
                        },
                        dataType : 'json',
                        type : 'post',
                        success : function(data){
                            if (data.success) {
                                var data = data.rows[0];
                                that.id = data.id;
                                that.companyId = data.companyId;
                                that.companyName = data.companyAssociated.companyName;
                                that.projectId = data.id;

                                if (that.examineFlag) {
                                    that.step = data.step;
                                } else {
                                    that.listStep = data.step;
                                }
                                that.subStep = data.subStep;
                                that.subStep2 = data.subStep2;
                                that.isMajorProject = data.isMajorProject;
                                that.haveTechnical = data.haveTechnical;
                                if (data.leader) {
                                    that.projectLeader = data.leader.id;
                                    that.projectLeaderName = data.leader.name;
                                }

                                that.haveDevelopment = data.haveDevelopment;
                                that.haveDrawing = data.haveDrawing;
                                that.havePlanning = data.havePlanning;
                                that.haveScheme = data.haveScheme;

                                that.intentionalCooperation = data.intentionalCooperation;
                                // 赋值字段为合同添加做校验
                                that.obj.contract_name = data.name;
                                that.obj.contract_contractAwardCompany = data.contractAwardCompany;
                                that.obj.contract_category = data.category;
                                that.obj.contract_type = data.type;
                                that.obj.contract_city = data.city;
                                that.obj.contract_address = data.address;
                                that.obj.contract_designArea = data.designArea;
                                that.obj.contract_investmentMount = data.investmentMount;
                                that.obj.contract_haveScheme = data.haveScheme;
                                that.obj.contract_haveDevelopment = data.haveDevelopment;
                                that.obj.contract_haveDrawing = data.haveDrawing;
                                that.obj.contract_havePlanning = data.havePlanning;

                                // 节点状态
                                if (that.step > 50) {
                                    if (that.intentionalCooperation == 63 || that.intentionalCooperation == 64) {
                                        jQuery(".wrap-tab li").eq("0").addClass('active');
                                    }
                                }
                                if (that.step >= 120) {
                                    if (that.intentionalCooperation == 63 || that.intentionalCooperation == 64) {
                                        jQuery(".wrap-tab li").eq("1").addClass('active');
                                    }
                                }
                                if (that.step >= 300) {
                                    jQuery(".wrap-tab li").eq("2").addClass('active');
                                }
                                if (that.step >= 400) {
                                    jQuery(".wrap-tab li").eq("3").addClass('active');
                                }
                                jQuery(".wrap-tab").on("click", "li", function () {
                                    if (jQuery(this).hasClass('active')) {
                                        var index = jQuery(this).index();
                                        if (index == 0 || index == 1) {
                                            if (that.intentionalCooperation == 63 || that.intentionalCooperation == 64) {
                                                myOpenWindow("/tpl/product/step"+ index +".html", 'stepTab');
                                            } else {
                                                myToast("暂无该节点")
                                            }
                                        } else {
                                            myOpenWindow("/tpl/product/step"+ index +".html", 'stepTab');
                                        }

                                    }
                                });

                                function tempFun10() {
                                    that.show.productName = data.name;
                                    if (that.role == 1 || that.role == 2 || that.role == 3 || that.role == 4 || that.role == 5 || that.personnelNature == 44) {
                                        jQuery(".equal10Detail").show();
                                        jQuery("#min10Detail").show();
                                    }
                                }
                                function tempFun20() {
                                    jQuery("#min10").show();
                                    tempFun10();
                                }
                                function tempFun30() {
                                    tempFun20();
                                    if (data.manager) that.show.managementPersonnel = data.manager.name;
                                    jQuery(".equal30 #applyDeadline").html(zjzm.formatDate(data.applyDeadline, "/"));
                                    jQuery(".equal30 input[name='passed-2']").eq(0).on("click", function () {
                                        jQuery(".equal30 #reason").val('').attr("readonly", true);
                                        jQuery(".equal30 #content").attr("readonly", false);
                                    });
                                    jQuery(".equal30 input[name='passed-2']").eq(1).on("click", function () {
                                        jQuery(".equal30 #content").val('').attr("readonly", true);
                                        jQuery(".equal30 #reason").attr("readonly", false);
                                    });
                                }
                                function tempFun40() {
                                    tempFun30();
                                }
                                if (that.step > 40) {
                                    tempFun30();
                                    jQuery(".wrap-tab-box").show();
                                    if (that.role == 1 || that.role == 2 || that.role == 3 || that.role == 4 || that.role == 5 || that.personnelNature == 44) {
                                        jQuery("#min40").show();
                                        jQuery("#min40Detail").show();
                                        jQuery("#min40Other").show();
                                    } else if (that.role == 7) {
                                        jQuery("#min40").show();
                                        jQuery("#min40Other").show();
                                    } else if(that.role == 8 || that.role == 10 || that.role == 9 || that.role == 11) {
                                        jQuery("#min40").show();
                                    }
                                    if (that.isMajorProject) {
                                        jQuery("#isMajorProject span").eq(0).show();
                                    } else {
                                        jQuery("#isMajorProject span").eq(1).show();
                                    }
                                    // 获取项目方案
                                    $.ajax(global.apiURL + '/project/user/getLeaders.htm', {
                                        data : {
                                            projectId: data.id,
                                            proposerId: data.projectLeader
                                        },
                                        dataType : 'json',
                                        type : 'post',
                                        success : function(data){
                                            if (data.success) {
                                                var datas = data.data[0].schema;
                                                jQuery("#schemaContent").val(datas[0].content)
                                            } else {
                                               //myToast(data.resultMsg);
                                            }
                                        },
                                        error : function() {
                                            myToast("服务器正忙，请稍后重试！");
                                        }
                                    });

                                    jQuery("#projectLeader").val(that.projectLeaderName);
                                }
                                if (that.step == 10) {
                                    jQuery(".equal10").show();
                                    tempFun10();
                                } else if (that.step == 20) {
                                    jQuery(".equal20").show();
                                    tempFun20();
                                    funPage20();
                                } else if (that.step == 30) {
                                    jQuery(".equal30").show();
                                    tempFun30();
                                } else if (that.step == 40) {
                                    jQuery(".equal40 #applyDeadline").val(zjzm.formatDate(data.applyDeadline, "/"));
                                    if (that.role == 2) {
                                        jQuery(".equal40").show();
                                        tempFun40()
                                        funPage40();
                                    } else if (that.role == 5 || that.personnelNature == 44) {
                                        jQuery(".equal30").show();
                                        tempFun30();
                                        // 获取方案内容
                                        $.ajax(global.apiURL + '/project/user/getSchemaApply.htm', {
                                            data : {
                                                projectId: data.id
                                            },
                                            dataType : 'json',
                                            type : 'post',
                                            success : function(data){
                                                if (data.success) {
                                                    var datas = data.data[0].schema[0];
                                                    jQuery(".equal30 #reason").val(datas.resason);
                                                    jQuery(".equal30 #content").val(datas.content);

                                                    if (datas.resason || datas.content) {
                                                        if (datas.content) {
                                                            jQuery(".equal30 input[name='passed-3']").eq(0).attr("checked", true);
                                                        } else {
                                                            jQuery(".equal30 input[name='passed-3']").eq(1).attr("checked", true);
                                                        }
                                                    }

                                                } else {
                                                   //myToast(data.resultMsg);
                                                }
                                            },
                                            error : function() {
                                                myToast("服务器正忙，请稍后重试！");
                                            }
                                        });
                                    }
                                } else if (that.step == 50) {
                                    if (that.role == 1 || that.role == 2 || that.role == 3 || that.role == 4 || that.role == 5 || that.personnelNature == 44) {
                                        jQuery("#min40").show();
                                        jQuery("#min40Detail").show();
                                        jQuery("#min40Other").show();
                                    } else if (that.role == 7) {
                                        jQuery("#min40").show();
                                        jQuery("#min40Other").show();
                                    } else if(that.role == 8 || that.role == 10 || that.role == 9 || that.role == 11) {
                                        jQuery("#min40").show();
                                    }
                                    jQuery(".equal50").show();
                                    if (that.intentionalCooperation == 63 || that.intentionalCooperation == 64) {
                                        funPage50();
                                    }
                                } else if (that.step == 60) {
                                    if (that.intentionalCooperation == 63 || that.intentionalCooperation == 64) {
                                        funPage60();
                                    }
                                    jQuery(".equal60").show();
                                } else if (that.step == 70) {
                                    jQuery(".equal70").show();
                                } else if (that.step == 80) {
                                    jQuery(".equal80").show();
                                } else if (that.step == 90) {
                                    jQuery(".equal90").show();
                                } else if (that.step == 100) {
                                    funPage100();
                                    jQuery(".equal100").show();
                                } else if (that.step == 110) {
                                    funPage110();
                                    jQuery(".equal110").show();
                                } else if (that.subStep == 120 && that.branch == 1) {
                                    funPage120();
                                    jQuery(".equal120").show();
                                } else if (that.step == 130) {
                                    jQuery(".equal130").show();
                                } else if (that.step == 140) {
                                    jQuery(".equal140").show();
                                } else if (that.step == 150) {
                                    jQuery(".equal150").show();
                                } else if (that.step == 160) {
                                    jQuery(".equal160").show();
                                } else if (that.step == 170) {
                                    jQuery(".equal170").show();
                                } else if (that.step == 190 && that.branch == 2) {
                                    funPage190();
                                    jQuery(".equal190").show();
                                } else if (that.step == 200) {
                                    jQuery(".equal200").show();
                                } else if (that.step == 210) {
                                    jQuery(".equal210").show();
                                } else if (that.step == 220) {
                                    jQuery(".equal220").show();
                                } else if (that.step == 230) {
                                    jQuery(".equal230").show();
                                } else if (that.subStep2 == 240 && that.branch == 3) {
                                    funPage240();
                                    jQuery(".equal240").show();
                                } else if (that.step == 250) {
                                    jQuery(".equal250").show();
                                } else if (that.step == 260) {
                                    jQuery(".equal260").show();
                                } else if (that.step == 270) {
                                    jQuery(".equal270").show();
                                } else if (that.step == 280) {
                                    jQuery(".equal280").show();
                                    if (that.haveTechnical) {
                                        jQuery(".equal280T").show();
                                    }
                                    funPage280();
                                } else if (that.step == 290 && (that.intentionalCooperation == 63 || that.intentionalCooperation == 64 || that.intentionalCooperation == '')) {
                                    jQuery(".equal290").show();
                                    funPage290();
                                } else if (that.step == 300) {
                                    jQuery(".equal300").show();
                                    funPage300();
                                } else if (that.step == 310) {
                                    jQuery(".equal310").show();
                                } else if (that.step == 315) {
                                    jQuery(".equal315").show();
                                } else if (that.step == 320) {
                                    jQuery(".equal320").show();
                                } else if (that.step == 330) {
                                    jQuery(".equal330").show();
                                } else if (that.step == 340) {
                                    jQuery(".equal340").show();
                                } else if (that.step == 350) {
                                    jQuery(".equal350").show();
                                } else if (that.step == 360) {
                                    jQuery(".equal360").show();
                                } else if (that.step == 370) {
                                    funPage370();
                                    jQuery(".equal370").show();
                                } else if (that.step == 380) {
                                    // 获取合同信息
                                    $.ajax(global.apiURL + '/contract/user/contractList.htm', {
                                        data : {
                                            projectId: data.id,
                                            status : 1
                                        },
                                        dataType : 'json',
                                        type : 'post',
                                        success : function(data1){
                                            if (data1.success) {
                                                var datas = data1.data[0];
                                                that.contractPayment = datas.contractPayment
                                            } else {
                                                //myToast(data.resultMsg);
                                            }
                                        },
                                        error : function() {
                                            myToast("服务器正忙，请稍后重试！");
                                        }
                                    });
                                    funPage380();
                                    funPage380O();
                                    jQuery(".equal380").show();
                                } else if (that.step == 390) {
                                    jQuery(".equal390").show();
                                } else if (that.step == 400) {
                                    jQuery(".equal400").show();
                                    setTimeout(function () {
                                        that.downLoad(jQuery(".downLoad-11"), data.id, 11);
                                    }, 100);
                                } else if (that.step == 410) {
                                    jQuery(".equal410").show();
                                } else if (that.step == 420) {
                                    jQuery(".equal420").show();
                                    setTimeout(function () {
                                        that.downLoad(jQuery(".downLoad-12"), data.id, 12);
                                    }, 100);
                                } else if (that.step == 430) {
                                    jQuery(".equal430").show();
                                    setTimeout(function () {
                                        that.downLoad(jQuery(".downLoad-14"), data.id, 14);
                                    }, 100);
                                } else if (that.step == 440) {
                                    jQuery(".equal440").show();
                                } else if (that.step == 450) {
                                    jQuery(".equal450").show();
                                    setTimeout(function () {
                                        that.downLoad(jQuery(".downLoad-14"), data.id, 14);
                                    }, 100);
                                } else if (that.step == 460) {
                                    jQuery(".equal460").show();
                                    setTimeout(function () {
                                        that.downLoad(jQuery(".downLoad-17"), data.id, 17);
                                    }, 100);
                                } else if (that.step == 470) {
                                    jQuery(".equal470").show();
                                } else if (that.step == 480) {
                                    jQuery(".equal480").show();
                                    setTimeout(function () {
                                        that.downLoad(jQuery(".downLoad-18"), data.id, 18);
                                    }, 100);
                                } else if (that.step == 490) {
                                    jQuery(".equal490").show();
                                    setTimeout(function () {
                                        that.downLoad(jQuery(".downLoad-20"), data.id, 20);
                                    }, 100);
                                } else if (that.step == 500) {
                                    jQuery(".equal500").show();
                                } else if (that.step == 510) {
                                    jQuery(".equal510").show();
                                    setTimeout(function () {
                                        that.downLoad(jQuery(".downLoad-21"), data.id, 21);
                                    }, 100);
                                }  else if (that.step == 520) {
                                    jQuery(".equal520").show();
                                    setTimeout(function () {
                                        that.downLoad(jQuery(".downLoad-24"), data.id, 24);
                                    }, 100);
                                }

                                function funPage20() {
                                    // 获取经营专员
                                    jQuery("#managementPersonnel").on("click", function() {
                                        if (!jQuery(this).attr("disabled")) {
                                            getmanagementPersonnel()
                                        }
                                    });
                                    function getmanagementPersonnel() {
                                        myLoading();
                                        mui.ajax(global.apiURL + '/user/companyStaffs.htm', {
                                            data : {
                                                jobId: 4
                                            },
                                            dataType : 'json',
                                            type : 'post',
                                            success : function(data){
                                                if (data.success) {
                                                    var datas = data.data;
                                                    createmanagementPersonnel(datas);
                                                } else {
                                                    if (data.resultMsg != "" || data.resultMsg != "暂无数据") {
                                                        myToast(data.resultMsg);
                                                    }
                                                }
                                                myLoadingOver();
                                            },
                                            error : function() {
                                                myToast("服务器正忙，请稍后重试！");
                                                myLoadingOver();
                                            }
                                        });
                                    }
                                    function createmanagementPersonnel(list) {
                                        var box = document.querySelector(".select-dialog ul");
                                        var dom = "";
                                        for (var i = 0; i < list.length; i++) {
                                            dom += "<li id='"+ list[i].userId +"'>"+ list[i].userInfo.name +"</li>";
                                        }
                                        box.innerHTML = dom;
                                        document.querySelector(".select-dialog").style.display = "block";
                                        document.querySelector(".select-dialog").setAttribute("id", "managementPersonnel-20");
                                    }
                                    // 获取建议人
                                    jQuery("#proposerId").on("click", function() {
                                        if (!jQuery(this).attr("disabled")) {
                                            getproposerId('proposerId')
                                        }
                                    });
                                    function createproposerId(list) {
                                        var box = document.querySelector(".select-dialog ul");
                                        var dom = "";
                                        for (var i = 0; i < list.length; i++) {
                                            dom += "<li id='"+ list[i].userId +"'>"+ list[i].userInfo.name +"</li>";
                                        }
                                        box.innerHTML = dom;
                                        document.querySelector(".select-dialog").style.display = "block";
                                        document.querySelector(".select-dialog").setAttribute("id", "proposerId-20");
                                    }
                                    // 获取邀请人
                                    jQuery("#inviterIds").on("click", function() {
                                        if (!jQuery(this).attr("disabled")) {
                                            getproposerId('inviterIds')
                                        }
                                    });
                                    function createinviterIds(list) {
                                        var box = document.querySelector(".select-dialog ul");
                                        var dom = "";
                                        for (var i = 0; i < list.length; i++) {
                                            dom += "<li id='"+ list[i].userId +"'>"+ list[i].userInfo.name +"</li>";
                                        }
                                        box.innerHTML = dom;
                                        document.querySelector(".select-dialog").style.display = "block";
                                        document.querySelector(".select-dialog").setAttribute("id", "inviterIds-20");
                                        document.querySelector(".select-dialog").setAttribute("multi", "true");
                                    }
                                    function getproposerId(clazz) {
                                        myLoading();
                                        mui.ajax(global.apiURL + '/user/staffPersons.htm', {
                                            data : {
                                                jobId: 5,
                                                personnelNature: 44
                                            },
                                            dataType : 'json',
                                            type : 'post',
                                            success : function(data){
                                                if (data.success) {
                                                    var datas = data.data;
                                                    if (clazz == "proposerId") {
                                                        createproposerId(datas);
                                                    }
                                                    if (clazz == "inviterIds") {
                                                        createinviterIds(datas);
                                                    }
                                                } else {
                                                    if (data.resultMsg != "" || data.resultMsg != "暂无数据") {
                                                        myToast(data.resultMsg);
                                                    }
                                                }
                                                myLoadingOver();
                                            },
                                            error : function() {
                                                myLoadingOver();
                                                myToast("服务器正忙，请稍后重试！");
                                            }
                                        });
                                    }
                                    document.querySelector('#applyDeadline').addEventListener('tap', function() {
                                        var that = this;
                                        step.dataPicker(that, "applyDeadline")
                                    }, false);
                                    // 弹出层
                                    jQuery(".select-dialog").on("click", "li", function () {
                                        var text = this.innerHTML;
                                        var id = this.getAttribute("id");
                                        var boxID = this.parentNode.parentNode.parentNode.getAttribute("id");
                                        var multi = jQuery(this).closest('.select-dialog').attr("multi");
                                        if (boxID == 'managementPersonnel-20') {
                                            that.obj.managementPersonnel = id;
                                            document.querySelector("#managementPersonnel").innerHTML = text;
                                        }
                                        if (boxID == 'proposerId-20') {
                                            that.obj.proposerId = id;
                                            document.querySelector("#proposerId").innerHTML = text;
                                        }
                                        if (!multi) {
                                            document.querySelector(".select-dialog").style.display = "none";
                                            document.querySelector(".select-dialog").setAttribute("id", "");
                                        } else {
                                            if (boxID == "inviterIds-20") {
                                                jQuery(this).toggleClass("active");
                                            }
                                        }
                                    });
                                    // 返回按钮
                                    jQuery("#cancel").on("click", function () {
                                        document.querySelector(".select-dialog").style.display = "none";
                                        document.querySelector(".select-dialog").setAttribute("id", "");
                                        document.querySelector(".select-dialog").setAttribute("multi", "");
                                    });
                                    // 确定按钮
                                    jQuery("#true").on("click", function () {
                                        var boxID = jQuery(".select-dialog").attr("id");
                                        var arr = [];
                                        var textArr = [];
                                        var text = "";
                                        if (boxID == "inviterIds-20") {
                                            jQuery(".select-dialog li").each(function () {
                                                if (jQuery(this).hasClass("active")) {
                                                    arr.push(jQuery(this).attr("id"));
                                                    textArr.push(jQuery(this).html());
                                                }
                                            });
                                            for (var i = 0; i < arr.length; i++) {
                                                that.obj.inviterIds = arr.join(",");
                                                text = textArr.join(",");
                                            }
                                            document.querySelector("#inviterIds").innerHTML = text;
                                        }
                                        document.querySelector(".select-dialog").style.display = "none";
                                        document.querySelector(".select-dialog").setAttribute("id", "");
                                        document.querySelector(".select-dialog").setAttribute("multi", "");
                                    });
                                    // 通过/不通过选项
                                    jQuery("input[name='passed-1']").on("click", function () {
                                        var value = jQuery(this).val();
                                        if (value == 1) {
                                            jQuery("#reason").prop("readonly", true);
                                            jQuery("#managementPersonnel").attr("disabled", false);
                                            jQuery("#proposerId").attr("disabled", false);
                                            jQuery("#inviterIds").attr("disabled", false);
                                            jQuery("#applyDeadline").attr("disabled", false);
                                            jQuery("input[name='proposerId']").attr("disabled", false);
                                            jQuery("input[name='inviterIds']").attr("disabled", false);
                                        } else {
                                            jQuery("#reason").prop("readonly", false);
                                            jQuery("#managementPersonnel").attr("disabled", true);
                                            jQuery("#proposerId").attr("disabled", true);
                                            jQuery("#inviterIds").attr("disabled", true);
                                            jQuery("#applyDeadline").attr("disabled", true);
                                            jQuery("input[name='proposerId']").prop("disabled", true);
                                            jQuery("input[name='inviterIds']").prop("disabled", true);
                                        }
                                    });
                                    jQuery(".equal20 input[name='proposerId']").on("click", function () {
                                        if ($(this).is(":checked")) {
                                            jQuery(".equal20 #proposerId").attr("disabled", false);
                                        } else {
                                            jQuery(".equal20 #proposerId").attr("disabled", true);
                                        }
                                    });
                                    jQuery(".equal20 input[name='inviterIds']").on("click", function () {
                                        if ($(this).is(":checked")) {
                                            jQuery(".equal20 #inviterIds").attr("disabled", false);
                                        } else {
                                            jQuery(".equal20 #inviterIds").attr("disabled", true);
                                        }
                                    });
                                }
                                function funPage40() {
                                    jQuery("#step40 input[name='passed-3']").on("click", function () {
                                        if (jQuery(this).val() == 1) {
                                            jQuery(".equal40 #reason").attr("readonly", true);
                                            jQuery(".equal40 #content").attr("readonly", false);
                                            jQuery(".equal40 #reason").val("");
                                            jQuery(".equal40 #leaderList input[type='radio']").each(function () {
                                                if (jQuery(this).attr("disabledtrue") == undefined) {
                                                    jQuery(this).attr("disabled", false);
                                                }
                                            });
                                            jQuery(".equal40 #people-radio").attr("disabled", false);
                                        } else {
                                            jQuery(".equal40 #leaderList input[type='radio']").each(function () {
                                                jQuery(this).attr("disabled", true);
                                            });
                                            jQuery(".equal40 #content").attr("readonly", true);
                                            jQuery(".equal40 #content").val("");
                                            jQuery(".equal40 #people-radio").attr("disabled", true);
                                            jQuery(".equal40 #reason").attr("readonly", false);
                                        }
                                    });
                                    if (that.role == 5 || that.personnelNature == 44) {
                                        // 获取方案内容
                                        $.ajax(global.apiURL + '/project/user/getSchemaApply.htm', {
                                            data : {
                                                projectId: data.id
                                            },
                                            dataType : 'json',
                                            type : 'post',
                                            success : function(data){
                                                if (data.success) {
                                                    var datas = data.data[0].schema[0];
                                                    jQuery("#reason").val(datas.resason);
                                                    jQuery("#content").val(datas.content);

                                                    if (datas.resason || datas.content) {
                                                        if (datas.content) {
                                                            jQuery("input[name='passed-3']").eq(0).attr("checked", true);
                                                        } else {
                                                            jQuery("input[name='passed-3']").eq(1).attr("checked", true);
                                                        }
                                                    }

                                                } else {
                                                   //myToast(data.resultMsg);
                                                }
                                            },
                                            error : function() {
                                                myToast("服务器正忙，请稍后重试！");
                                            }
                                        });
                                    }
                                    // 获取受邀人员列表
                                    $.ajax(global.apiURL + '/project/user/getLeaders.htm', {
                                        data : {
                                            projectId: data.id
                                        },
                                        dataType : 'json',
                                        type : 'post',
                                        success : function(data){
                                            if (data.success) {
                                                var datas = data.data[0].schema;
                                                createLeaderList(datas)
                                                function createLeaderList(datas) {
                                                    var dom = "";
                                                    var box = jQuery("#leaderList");
                                                    for (var i = 0; i < datas.length; i++) {
                                                        if (datas[i].userInfo) {
                                                            dom += "<dd>";
                                                            dom += "<div class='mui-input-row mui-radio mui-left'>";
                                                            var recommend = "";
                                                            if (datas[i].recommend) {
                                                                recommend = "（推荐）";
                                                            }
                                                            if (datas[i].accepted == 0) {
                                                                dom +=  "<label>"+ datas[i].userInfo.name +"（未申请）<i>" + recommend + "</i></label>";
                                                                dom += "<input type='radio' name='proposerId' value='"+ datas[i].schemeProposer +"' disabled disabledTrue />";
                                                            } else if (datas[i].accepted == 9) {
                                                                dom +=  "<label>"+ datas[i].userInfo.name +"（放弃申请）<i>" + recommend + "</i></label>";
                                                                dom += "<input type='radio' name='proposerId' value='"+ datas[i].schemeProposer +"' disabled disabledTrue />";
                                                            } else {
                                                                dom +=  "<label>"+ datas[i].userInfo.name +"（已申请）<i>" + recommend + "</i></label>";
                                                                dom += "<input type='radio' name='proposerId' value='"+ datas[i].schemeProposer +"' />";
                                                            }
                                                            dom +="</div>";
                                                            if (datas[i].accepted == 9) {
                                                                dom += "<p>【理由】："+ datas[i].resason +"</p></dd>";
                                                            } else if (datas[i].accepted == 1) {
                                                                dom += "<p>【项目计划】："+ datas[i].content +"</p></dd>";
                                                            } else {
                                                                dom += "<p>"+ datas[i].content +"</p></dd>";
                                                            }
                                                        }
                                                    }
                                                    box.empty();
                                                    box.append(dom);
                                                    box.find("input").eq(0).attr("checked", true);
                                                }
                                            } else {
                                               //myToast(data.resultMsg);
                                            }
                                        },
                                        error : function() {
                                            myToast("服务器正忙，请稍后重试！");
                                        }
                                    });

                                    // 获取直接指定人员
                                    jQuery("#leaderList").on("click", "input[type='radio']", function() {
                                        jQuery("#people").attr("disabled", true);
                                        jQuery(".equal40  #content").attr("readonly", true);
                                    });
                                    jQuery("#people-radio").on("click", function() {
                                        jQuery("#people").attr("disabled", false);
                                        jQuery(".equal40  #content").attr("readonly", false);
                                    });
                                    jQuery("#people").on("click", function () {
                                        if (jQuery(this).attr("disabled") != "disabled") {
                                            myLoading();
                                            $.ajax(global.apiURL + '/user/staffPersons.htm', {
                                                data : {
                                                    jobId: 5,
                                                    personnelNature: 44
                                                },
                                                dataType : 'json',
                                                type : 'post',
                                                success : function(data){
                                                    if (data.success) {
                                                        var datas = data.data;
                                                        createPeople(datas);
                                                    } else {
                                                        //myToast(data.resultMsg);
                                                    }
                                                    myLoadingOver();
                                                },
                                                error : function() {
                                                    myLoadingOver();
                                                    myToast("服务器正忙，请稍后重试！");
                                                }
                                            });
                                        }
                                    });
                                    function createPeople(list) {
                                        var box = document.querySelector(".select-dialog ul");
                                        var dom = "";
                                        for (var i = 0; i < list.length; i++) {
                                            dom += "<li id='"+ list[i].userId +"'>"+ list[i].userInfo.name +"</li>";
                                        }
                                        box.innerHTML = dom;
                                        document.querySelector(".select-dialog").style.display = "block";
                                        document.querySelector(".select-dialog").setAttribute("id", "peoples");
                                    }
                                    jQuery(".select-dialog").on("click", "li", function () {
                                        var text = this.innerHTML;
                                        var id = this.getAttribute("id");
                                        var boxID = this.parentNode.parentNode.parentNode.getAttribute("id");

                                        if (boxID == 'peoples') {
                                            that.obj.people = id;
                                            document.querySelector("#people").innerHTML = text;
                                        }
                                        document.querySelector(".select-dialog").style.display = "none";
                                        document.querySelector(".select-dialog").setAttribute("id", "");
                                    });
                                }
                                function funPage50() {
                                    that.downLoad(jQuery(".downLoad-1"), data.id, 1);
                                    document.querySelector('#deadline').addEventListener('tap', function() {
                                        var that = this;
                                        step.dataPicker(that, "deadline")
                                    }, false);
                                }
                                function funPage60() {
                                    that.downLoad(jQuery(".downLoad-2"), data.id, 2);
                                    // 获取报名拟定不通过内容
                                    $.ajax(global.apiURL + '/officeAudit/user/getAuditBusiness.htm', {
                                        data : {
                                            projectId: data.id,
                                            officeType : 0,
                                            manageType : 46,
                                            leaderType : 69,
                                            chiefType : 0,
                                            lawType : 0,
                                            financialType : 0
                                        },
                                        dataType : 'json',
                                        type : 'post',
                                        success : function(data){
                                            if (data.success) {
                                                that.show.bmnd.name = data.rows.basicData.attributeName + "不通过"
                                                that.show.bmnd.time = zjzm.getDay(data.rows.updateTime.time, "yyyy/MM/dd")
                                                that.show.bmnd.memo = data.rows.memo
                                            }
                                        },
                                        error : function() {
                                            myToast("服务器正忙，请稍后重试！");
                                        }
                                    });
                                }
                                function funPage100() {
                                    that.downLoad(jQuery(".downLoad-3"), data.id, 3);
                                    // 获取报名文件制作人
                                    jQuery(".equal100 #people").on("click", function () {
                                        var disabled = jQuery(this).attr("disabled");
                                        if (!disabled) {
                                            myLoading();
                                            $.ajax(global.apiURL + '/user/companyStaffs.htm', {
                                                data : {
                                                    jobId: 4
                                                },
                                                dataType : 'json',
                                                type : 'post',
                                                success : function(data){
                                                    if (data.success) {
                                                        var datas = data.data;
                                                        createPeople(datas);
                                                    } else {
                                                        //myToast(data.resultMsg);
                                                    }
                                                    myLoadingOver();
                                                },
                                                error : function() {
                                                    myLoadingOver();
                                                    myToast("服务器正忙，请稍后重试！");
                                                }
                                            });
                                        }
                                    });
                                    function createPeople(list) {
                                        var box = document.querySelector(".select-dialog ul");
                                        var dom = "";
                                        for (var i = 0; i < list.length; i++) {
                                            dom += "<li id='"+ list[i].userId +"'>"+ list[i].userInfo.name +"</li>";
                                        }
                                        box.innerHTML = dom;
                                        document.querySelector(".select-dialog").style.display = "block";
                                        document.querySelector(".select-dialog").setAttribute("id", "peoples");
                                    }
                                    // 选择不成功原因
                                    jQuery(".equal100 #failResult").on("click", function () {
                                        var disabled = jQuery(this).attr("disabled");
                                        if (!disabled) {
                                            that.getBasic(17, cb)
                                            function cb(list) {
                                                var box = document.querySelector(".select-dialog ul");
                                                var dom = "";
                                                for (var i = 0; i < list.length; i++) {
                                                    dom += "<li id='"+ list[i].id +"'>"+ list[i].attributeName +"</li>";
                                                }
                                                box.innerHTML = dom;
                                            }
                                            document.querySelector(".select-dialog").style.display = "block";
                                            document.querySelector(".select-dialog").setAttribute("id", "failResults");
                                        }
                                    });
                                    jQuery(".select-dialog").on("click", "li", function () {
                                        var text = this.innerHTML;
                                        var id = this.getAttribute("id");
                                        var boxID = this.parentNode.parentNode.parentNode.getAttribute("id");

                                        if (boxID == 'peoples') {
                                            that.obj.people = id;
                                            document.querySelector(".equal100 #people").innerHTML = text;
                                        }
                                        if (boxID == 'failResults') {
                                            that.obj.failResult = text;
                                            document.querySelector(".equal100 #failResult").innerHTML = text;
                                        }
                                        document.querySelector(".select-dialog").style.display = "none";
                                        document.querySelector(".select-dialog").setAttribute("id", "");
                                    });
                                    // 切换不成功可选状态
                                    jQuery(".equal100 input[name='status']").on("click", function () {
                                        var val = jQuery(this).val()
                                        if (val == 1) {
                                            jQuery(".equal100 #failResult").attr("disabled", true);
                                            jQuery(".equal100 #failResult").html("选择不成功原因");
                                        } else {
                                            jQuery(".equal100 #failResult").attr("disabled", false);
                                        }
                                    });
                                }
                                function funPage110() {
                                    that.downLoad(jQuery(".downLoad-4"), data.id, 4);
                                    // 保证金截止日期
                                    document.querySelector('#marginDeadline').addEventListener('tap', function() {
                                        var that = this;
                                        step.dataPicker(that, "marginDeadline")
                                    }, false);
                                    // 投标截止日期
                                    document.querySelector('#tenderDeadline').addEventListener('tap', function() {
                                        var that = this;
                                        step.dataPicker(that, "tenderDeadline")
                                    }, false);
                                }
                                function funPage120() {
                                    // 最晚汇款日期
                                    setTimeout(function () {
                                        document.querySelector('#latestRemittanceDate').addEventListener('tap', function() {
                                            var that = this;
                                            step.dataPicker(that, "latestRemittanceDate")
                                        }, false);
                                    }, 1);
                                    // 获取保证金不通过内容
                                    $.ajax(global.apiURL + '/officeAudit/user/getAuditBusiness.htm', {
                                        data : {
                                            projectId: data.id,
                                            officeType : 52,
                                            manageType : 47,
                                            leaderType : 70,
                                            chiefType : 0,
                                            lawType : 0,
                                            financialType : 0
                                        },
                                        dataType : 'json',
                                        type : 'post',
                                        success : function(data){
                                            if (data.success) {
                                                that.show.bzj.name = data.rows.basicData.attributeName + "不通过"
                                                that.show.bzj.time = zjzm.getDay(data.rows.updateTime.time, "yyyy/MM/dd")
                                                that.show.bzj.memo = data.rows.memo

                                            } else {
                                                //myToast(data.resultMsg);
                                            }
                                        },
                                        error : function() {
                                            myToast("服务器正忙，请稍后重试！");
                                        }
                                    });
                                    // 历史记录赋值
                                    if (data.bail) {
                                        that.show.bail = data.bail
                                        that.obj.latestRemittanceDate = data.latestRemittanceDate
                                        that.show.latestRemittanceDate = zjzm.formatDate(data.latestRemittanceDate, "/")
                                        that.show.remittanceCompany = data.remittanceCompany
                                        that.show.bankName = data.bankName
                                        that.show.accountNo = zjzm.formatBankCode(data.accountNo)
                                        that.show.bailMemo = data.bailMemo
                                    }
                                }
                                function funPage190() {
                                    that.downLoad(jQuery(".downLoad-5"), data.id, 5);
                                    // 获取商务标不通过内容
                                    $.ajax(global.apiURL + '/officeAudit/user/getAuditBusiness.htm', {
                                        data : {
                                            projectId: data.id,
                                            officeType : 53,
                                            manageType : 48,
                                            leaderType : 71,
                                            chiefType : 0,
                                            lawType : 0,
                                            financialType : 0
                                        },
                                        dataType : 'json',
                                        type : 'post',
                                        success : function(data){
                                            if (data.success) {
                                                that.show.swb.name = data.rows.basicData.attributeName + "不通过"
                                                that.show.swb.time = zjzm.getDay(data.rows.updateTime.time, "yyyy/MM/dd")
                                                that.show.swb.memo = data.rows.memo
                                                //myToast(data.resultMsg);
                                            }
                                        },
                                        error : function() {
                                            myToast("服务器正忙，请稍后重试！");
                                        }
                                    });
                                }
                                function funPage240() {
                                    setTimeout(function() {
                                        that.downLoad(jQuery(".downLoad-7"), data.id, 7);
                                        // 获取技术标不通过内容
                                        $.ajax(global.apiURL + '/officeAudit/user/getAuditBusiness.htm', {
                                            data : {
                                                projectId: data.id,
                                                officeType : 54,
                                                manageType : 0,
                                                leaderType : 0,
                                                chiefType : 57,
                                                lawType : 0,
                                                financialType : 0
                                            },
                                            dataType : 'json',
                                            type : 'post',
                                            success : function(data){
                                                if (data.success) {
                                                    that.show.jsb.name = data.rows.basicData.attributeName + "不通过"
                                                    that.show.jsb.time = zjzm.getDay(data.rows.updateTime.time, "yyyy/MM/dd")
                                                    that.show.jsb.memo = data.rows.memo
                                                    //myToast(data.resultMsg);
                                                }
                                            },
                                            error : function() {
                                                myToast("服务器正忙，请稍后重试！");
                                            }
                                        });
                                    }, 1);
                                }
                                function funPage280() {
                                    // 商务标
                                    setTimeout(function() {
                                        that.downLoad(jQuery(".downLoad-6"), data.id, 6);
                                    }, 1);
                                    // 技术标
                                    if (that.haveTechnical) {
                                        setTimeout(function() {
                                            that.downLoad(jQuery(".downLoad-8"), data.id, 8);
                                        }, 1);
                                    }
                                    // 商务标制作人
                                    jQuery("#businessProducer").on("click", function () {
                                        myLoading();
                                        $.ajax(global.apiURL + '/user/companyStaffs.htm', {
                                            data : {
                                                jobId: 4
                                            },
                                            dataType : 'json',
                                            type : 'post',
                                            success : function(data){
                                                if (data.success) {
                                                    var datas = data.data;
                                                    createbusinessProducer(datas);
                                                } else {
                                                    //myToast(data.resultMsg);
                                                }
                                                myLoadingOver();
                                            },
                                            error : function() {
                                                myLoadingOver();
                                                myToast("服务器正忙，请稍后重试！");
                                            }
                                        });
                                    });
                                    function createbusinessProducer(list) {
                                        var box = document.querySelector(".select-dialog ul");
                                        var dom = "";
                                        for (var i = 0; i < list.length; i++) {
                                            dom += "<li id='"+ list[i].userId +"'>"+ list[i].userInfo.name +"</li>";
                                        }
                                        box.innerHTML = dom;
                                        document.querySelector(".select-dialog").style.display = "block";
                                        document.querySelector(".select-dialog").setAttribute("id", "businessProducers");
                                    }
                                    jQuery(".select-dialog").on("click", "li", function () {
                                        var text = this.innerHTML;
                                        var id = this.getAttribute("id");
                                        var boxID = this.parentNode.parentNode.parentNode.getAttribute("id");

                                        if (boxID == 'businessProducers') {
                                            that.obj.businessProducer = id;
                                            document.querySelector("#businessProducer").innerHTML = text;
                                        }
                                        document.querySelector(".select-dialog").style.display = "none";
                                        document.querySelector(".select-dialog").setAttribute("id", "");
                                    });
                                }
                                function funPage290() {
                                    setTimeout(function () {
                                        // 获取开标记录
                                        $.ajax(global.apiURL + '/project/user/bidList.htm', {
                                            data : {
                                                companyId : that.companyId,
                                                projectId: that.projectId
                                            },
                                            dataType : 'json',
                                            type : 'post',
                                            success : function(data){
                                                if (data.success) {
                                                    createBidList(data.data);
                                                } else {
                                                    //myToast(data.resultMsg);
                                                }
                                            },
                                            error : function() {
                                                myToast("服务器正忙，请稍后重试！");
                                            }
                                        });
                                        function createBidList(datas) {
                                            var box = jQuery("#bidList");
                                            var dom = "";
                                            for (var i = 0; i < datas.length; i++) {
                                                dom += "<li id='"+ i +"' bidCompany='"+ datas[i].bidCompany +"'>"+
                                                    "<span>"+ datas[i].ranking +"</span>"+
                                                    "<span>"+ datas[i].company.companyName +"</span>"+
                                                    "<span>"+ datas[i].bidOffer +"元</span>";
                                                    if (datas[i].totleScore) {
                                                        dom += "<span>"+ datas[i].totleScore +"分</span>";
                                                    } else {
                                                        dom += "<span></span>";
                                                    }
                                                if (step.role == 4) {
                                                    dom += "<img src='../../images/svg/edit.svg' class='icon-30'>";
                                                }
                                                dom += "</li>";
                                            }
                                            box.append(dom);
                                        }
                                        // 开标信息
                                        jQuery("#add-bid").on("click", function () {
                                            mySetLocalStorage("companyId", that.companyId);
                                            mySetLocalStorage("projectId", that.projectId);
                                            zjzm.historyUrl("/tpl/product/step-tab.html");
                                            myOpenWindow("/tpl/product/bid-info.html", 'list');
                                        });
                                        jQuery("#bidList").on("click", "li", function () {
                                            var id = jQuery(this).attr("id");
                                            mySetLocalStorage("bidId", id);
                                            mySetLocalStorage("companyId", that.companyId);
                                            mySetLocalStorage("projectId", that.projectId);
                                            zjzm.historyUrl("/tpl/product/step-tab.html");
                                            myOpenWindow("/tpl/product/bid-info.html", 'list');
                                        });
                                    }, 1);
                                }
                                function funPage300() {
                                    that.downLoad(jQuery(".downLoad-9"), data.id, 9);
                                    // 获取合同不通过内容
                                    $.ajax(global.apiURL + '/officeAudit/user/getAuditBusiness.htm', {
                                        data : {
                                            projectId: data.id,
                                            officeType : 55,
                                            manageType : 49,
                                            leaderType : 72,
                                            chiefType : 77,
                                            lawType : 73,
                                            financialType : 27
                                        },
                                        dataType : 'json',
                                        type : 'post',
                                        success : function(data){
                                            if (data.success) {
                                                that.show.ht.name = data.rows.basicData.attributeName + "不通过"
                                                that.show.ht.time = zjzm.getDay(data.rows.updateTime.time, "yyyy/MM/dd")
                                                that.show.ht.memo = data.rows.memo
                                                //myToast(data.resultMsg);
                                            }
                                        },
                                        error : function() {
                                            myToast("服务器正忙，请稍后重试！");
                                        }
                                    });
                                }
                                function funPage370() {
                                    if (that.role == 4) {
                                        // 合同文件
                                        that.downLoad(jQuery(".downLoad-10"), data.id, 10);
                                    } else {
                                        that.downLoad(jQuery(".downLoad-9"), data.id, 9);
                                    }
                                    if (that.productPage == 'stepPage') {
                                        listSetInfo();
                                        // 恢复禁用
                                        jQuery("#contract-box input, #contract-box textarea").each(function () {
                                            jQuery(this).attr("readonly", false);
                                        });
                                        jQuery("#contract-box .mui-input-row").each(function () {
                                            jQuery(this).find("input").attr("disabled", false);
                                        });
                                        jQuery("#contract-box .simulation-select").each(function () {
                                            jQuery(this).attr("disabled", false);
                                        });
                                        // 禁用
                                        jQuery("#contract_no").attr("readonly", true);
                                    }
                                    // 获取合同信息
                                    $.ajax(global.apiURL + '/contract/user/contractList.htm', {
                                        data : {
                                            projectId: data.id,
                                            status : 1
                                        },
                                        dataType : 'json',
                                        type : 'post',
                                        success : function(data1){
                                            if (data1.success) {
                                                if (data1.data.length) {
                                                    var datas = data1.data[0];
                                                    that.obj.contract = true;
                                                    conteactSetInof(datas) ;
                                                } else {

                                                }
                                            } else {
                                                that.obj.contract = false;
                                                // listSetInfo();
                                                // if (that.productPage == 'stepPage') {
                                                //     // 恢复禁用
                                                //     jQuery("#contract-box input, #contract-box textarea").each(function () {
                                                //         jQuery(this).attr("readonly", false);
                                                //     });
                                                //     jQuery("#contract-box .mui-input-row").each(function () {
                                                //         jQuery(this).find("input").attr("disabled", false);
                                                //     });
                                                //     jQuery("#contract-box .simulation-select").each(function () {
                                                //         jQuery(this).attr("disabled", false);
                                                //     });
                                                //     // 禁用
                                                //     jQuery("#contract_no").attr("readonly", true);
                                                // }
                                            }
                                        },
                                        error : function() {
                                            myToast("服务器正忙，请稍后重试！");
                                        }
                                    });

                                    // 根据合同创建数据
                                    function conteactSetInof(datas) {
                                        that.obj.contractId = datas.id;
                                        // 合同有值，设置禁用
                                        jQuery("#name, #address, #designArea, #investmentMount").attr("readonly", true);
                                        jQuery("#haveScheme, #haveDevelopment, #haveDrawing, #havePlanning, #contractAwardCompany, #category, #type, #cityId").attr("disabled", true);

                                        jQuery("#contract_no").val(datas.contractNo);
                                        jQuery("#contract_capital").val(formatCurrency1(datas.contractCapital));
                                        jQuery("#sign_date").html(zjzm.formatDate(datas.signDate, "/"));
                                        that.obj.signDate = datas.signDate;
                                        jQuery("#contractMemo").val(datas.contractMemo);
                                        if (datas.ratio) {
                                            jQuery("#ratio").val(datas.ratio);
                                        }
                                        jQuery("#ratio_memo").val(datas.ratioMemo);
                                        that.obj.ratio_memo = datas.ratioMemo;
                                        that.contractPayment = datas.contractPayment
                                        createPayType(datas.contractPayment)

                                        // 获取项目类别
                                        that.getBasic(5, createCategory);
                                        function createCategory(data) {
                                            for (var i = 0; i < data.length; i++) {
                                                if (data[i].attributeId == datas.project.category) {
                                                    jQuery("#category").html(data[i].attributeName)
                                                }
                                            }
                                        }
                                        // 获取项目类型
                                        that.getBasic(6, createType);
                                        function createType(data) {
                                            for (var i = 0; i < data.length; i++) {
                                                if (data[i].attributeId == datas.project.type) {
                                                    jQuery("#type").html(data[i].attributeName)
                                                }
                                            }
                                        }
                                        // 发包单位
                                        mui.ajax(global.apiURL + '/companyAssocited/user/getCompanyAssociatedInfo.htm', {
                                            data : {},
                                            dataType : 'json',
                                            type : 'post',
                                            success : function(data){
                                                if (data.success) {
                                                    var data = data.rows;
                                                    for (var i = 0; i < data.length; i++) {
                                                        if (data[i].id == datas.project.contractAwardCompany) {
                                                            jQuery("#contractAwardCompany").html(data[i].companyName)
                                                        }
                                                    }
                                                }
                                            },
                                            error : function() {
                                                myToast("服务器正忙，请稍后重试！");
                                            }
                                        });
                                        // 根据id值获取详细地址
                                        getDetailAddress(data.city)
                                        function getDetailAddress(id) {
                                            mui.ajax(global.apiURL + '/company/user/getAllArea.htm', {
                                                data : {
                                                    id: id
                                                },
                                                dataType : 'json',
                                                type : 'post',
                                                success : function(data){
                                                    if (data.success) {
                                                        jQuery("#cityId").html(data.rows[0].areaName);
                                                    } else {
                                                        myToast(data.resultMsg);
                                                    }
                                                },
                                                error : function() {
                                                    myToast("服务器正忙，请稍后重试！");
                                                }
                                            });
                                        }
                                        jQuery("#name").val(data.name);
                                        jQuery("#address").val(data.address);
                                        jQuery("#designArea").val(data.designArea);
                                        jQuery("#investmentMount").val(data.investmentMount);
                                        if (data.haveScheme) {
                                           jQuery("#haveScheme").attr("checked", true);
                                        }
                                        if (data.haveDevelopment) {
                                           jQuery("#haveDevelopment").attr("checked", true);
                                        }
                                        if (data.haveDrawing) {
                                           jQuery("#haveDrawing").attr("checked", true);
                                        }
                                        if (data.havePlanning) {
                                           jQuery("#havePlanning").attr("checked", true);
                                        }
                                        // 创建付款方式
                                        that.obj.paymentUpdate = "";
                                        function createPayType(datas) {
                                            var dom = "",
                                                box = jQuery("#payType");
                                            for (var i = 0; i < datas.length; i++) {
                                                that.obj.paymentUpdate += datas[i].paymentPaymentModeName + datas[i].paymentAmount;
                                                dom += "<dd id='"+ datas[i].paymentMode +"'>"+
                                                    "<span class='simulation-select half'>"+ datas[i].paymentPaymentModeName +"</span>"+
                                                    // "<input type='text' class='input' value='"+ datas[i].paymentPaymentModeName +"' readonly />"+
                                                    "<input type='text' class='input' value='"+ formatCurrency1(datas[i].paymentAmount) +"' />"+
                                                    "<em>-</em>"+
                                                "</dd>";
                                            }
                                            box.html(dom);
                                        }
                                        // 备注
                                        jQuery("#contractMemo").val(datas.contractMemo);
                                        that.obj.contract_contractMemo = datas.contractMemo;
                                        that.obj.contractVersion = datas.version;
                                    }
                                    // 根据列表创建数据
                                    function listSetInfo() {
                                        var thatData = data;
                                        // 项目名称
                                        jQuery("#name").val(data.name)
                                        // 获取合同编号
                                        function getNum() {
                                            var year = new Date().getFullYear();
                                            year = year.toString().substring(2, 4);
                                            var temp = "CB"+ year + "-" + data.categoryAbbreviate + data.managementDepartmentAbbreviate;
                                            myLoading();
                                            $.ajax(global.apiURL + '/contract/user/contractMaxNo.htm', {
                                                data : {
                                                    contractNo: temp
                                                },
                                                dataType : 'json',
                                                type : 'post',
                                                success : function(data){
                                                    if (data.success) {
                                                        jQuery("#contract_no").val(data.data);
                                                    } else {
                                                        myToast(data.resultMsg);
                                                    }
                                                    myLoadingOver();
                                                },
                                                error : function() {
                                                    myLoadingOver();
                                                    myToast("服务器正忙，请稍后重试！");
                                                }
                                            });
                                        }
                                        getNum();
                                        // 合同金额
                                        //contract_capital
                                        // 签约日期
                                        document.querySelector('#sign_date').addEventListener('tap', function() {
                                            var that = this;
                                            step.dataPicker(that, "sign_date")
                                        }, false);
                                        // 发包单位
                                        that.obj.contractAwardCompany = thatData.contractAwardCompany;
                                        mui.ajax(global.apiURL + '/companyAssocited/user/getCompanyAssociatedInfo.htm', {
                                            data : {},
                                            dataType : 'json',
                                            type : 'post',
                                            success : function(data){
                                                if (data.success) {
                                                    var datas = data.rows;
                                                    for (var i = 0; i < datas.length; i++) {
                                                        if (datas[i].id == thatData.contractAwardCompany) {
                                                            jQuery("#contractAwardCompany").html(datas[i].companyName)
                                                        }
                                                    }
                                                }
                                            },
                                            error : function() {
                                                myToast("服务器正忙，请稍后重试！");
                                            }
                                        });
                                        jQuery("#contractAwardCompany").on("click", function () {
                                            var disabled = jQuery(this).attr("disabled");
                                            if (!disabled) {
                                                myLoading();
                                                $.ajax(global.apiURL + '/companyAssocited/user/getCompanyAssociatedInfo.htm', {
                                                    data : {
                                                        jobId: 4,
                                                        rows : 100
                                                    },
                                                    dataType : 'json',
                                                    type : 'post',
                                                    success : function(data){
                                                        if (data.success) {
                                                            var datas = data.rows;
                                                            createContractAwardCompany(datas);
                                                        } else {
                                                            myToast(data.resultMsg);
                                                        }
                                                        myLoadingOver();
                                                    },
                                                    error : function() {
                                                        myLoadingOver();
                                                        myToast("服务器正忙，请稍后重试！");
                                                    }
                                                });
                                            }
                                        });
                                        function createContractAwardCompany(list) {
                                            var box = document.querySelector(".select-dialog ul");
                                            var dom = "";
                                            for (var i = 0; i < list.length; i++) {
                                                dom += "<li id='"+ list[i].id +"'>"+ list[i].companyName +"</li>";
                                            }
                                            box.innerHTML = dom;
                                            document.querySelector(".select-dialog").style.display = "block";
                                            document.querySelector(".select-dialog").setAttribute("id", "contractAwardCompanys");
                                        }
                                        // 类别
                                        that.obj.category = thatData.category;
                                        that.getBasic(5, createCategory);
                                            function createCategory(data) {
                                                for (var i = 0; i < data.length; i++) {
                                                    if (data[i].attributeId == thatData.category) {
                                                        jQuery("#category").html(data[i].attributeName)
                                                    }
                                                }
                                            }
                                        jQuery("#category").on("click", function () {
                                            var disabled = jQuery(this).attr("disabled");
                                            if (!disabled) {
                                                that.getBasic(5, createType);
                                                function createType(list) {
                                                    var box = document.querySelector(".select-dialog ul");
                                                    var dom = "";

                                                    for (var i = 0; i < list.length; i++) {
                                                        dom += "<li id='"+ list[i].attributeId +"'>"+ list[i].attributeName +"</li>";
                                                    }
                                                    box.innerHTML = dom;
                                                    document.querySelector(".select-dialog").style.display = "block";
                                                    document.querySelector(".select-dialog").setAttribute("id", "categorys");
                                                }
                                            }
                                        });
                                        // 类型
                                        that.obj.type = thatData.type;
                                        that.getBasic(6, createType);
                                            function createType(data) {
                                                for (var i = 0; i < data.length; i++) {
                                                    if (data[i].attributeId == thatData.type) {
                                                        jQuery("#type").html(data[i].attributeName)
                                                    }
                                                }
                                            }
                                        jQuery("#type").on("click", function () {
                                            var disabled = jQuery(this).attr("disabled");
                                            if (!disabled) {
                                                that.getBasic(6, createType);
                                                function createType(list) {
                                                    var box = document.querySelector(".select-dialog ul");
                                                    var dom = "";

                                                    for (var i = 0; i < list.length; i++) {
                                                        dom += "<li id='"+ list[i].attributeId +"'>"+ list[i].attributeName +"</li>";
                                                    }
                                                    box.innerHTML = dom;
                                                    document.querySelector(".select-dialog").style.display = "block";
                                                    document.querySelector(".select-dialog").setAttribute("id", "types");
                                                }
                                            }
                                        });
                                        // 所在城市
                                        that.obj.city = thatData.city;
                                        getDetailAddress(thatData.city)
                                        function getDetailAddress(id) {
                                            mui.ajax(global.apiURL + '/company/user/getAllArea.htm', {
                                                data : {
                                                    id: id
                                                },
                                                dataType : 'json',
                                                type : 'post',
                                                success : function(data){
                                                    if (data.success) {
                                                        jQuery("#cityId").html(data.rows[0].areaName);
                                                    } else {
                                                        myToast(data.resultMsg);
                                                    }
                                                },
                                                error : function() {
                                                    myToast("服务器正忙，请稍后重试！");
                                                }
                                            });
                                        }
                                        jQuery("#address").val(data.address);
                                        var areaBtn = document.getElementById('cityId');
                                        areaBtn.addEventListener('tap', function(event) {
                                            myLoading();
                                            jQuery.ajax({
                                                url: global.apiURL + "/area/getAllNameArea.htm",
                                                type: 'post',
                                                dataType: 'json',
                                                data: {},
                                                success: function (data) {
                                                    if (data.success) {
                                                        var cityData3 = data.data;
                                                        var cityPicker3 = new mui.PopPicker({
                                                            layer: 3
                                                        });
                                                        cityPicker3.setData(cityData3);
                                                        cityPicker3.show(function(items) {
                                                            var pro = items[0].text;
                                                            var city = items[1].text;
                                                            var area = items[2].text;
                                                            if (city == "不限") {
                                                                city = "";
                                                            }
                                                            if (area == "不限") {
                                                                area = "";
                                                            }
                                                            if (pro == city) {
                                                                city = '';
                                                            }
                                                            areaBtn.innerHTML = pro + city + area;
                                                            that.obj.cityId = items[2].value;
                                                        });
                                                    } else {
                                                        myToast(data.resultMsg);
                                                    }
                                                    myLoadingOver();
                                                }
                                            });
                                        }, false);
                                        // 设计面积
                                        jQuery("#designArea").val(thatData.designArea);
                                        // 投资额
                                        jQuery("#investmentMount").val(thatData.investmentMount);
                                        // 设计阶段
                                        if (thatData.haveScheme) {
                                           jQuery("#haveScheme").attr("checked", true);
                                        }
                                        if (thatData.haveDevelopment) {
                                           jQuery("#haveDevelopment").attr("checked", true);
                                        }
                                        if (thatData.haveDrawing) {
                                           jQuery("#haveDrawing").attr("checked", true);
                                        }
                                        if (thatData.havePlanning) {
                                           jQuery("#havePlanning").attr("checked", true);
                                        }
                                        // 添加付款方式
                                        jQuery("#add-paytype").on("click", function () {
                                            var dom = "<dd>"+
                                                "<span class='simulation-select half'>请选择</span>"+
                                                "<input type='tel' class='input' placeholder='请输入' />"+
                                                "<em>-</em>"+
                                            "</dd>";
                                            var box = jQuery("#payType");
                                            box.append(dom);
                                        });
                                        // 删除付款方式
                                        jQuery("#payType").on("click", "em", function () {
                                            var that = jQuery(this);
                                            myConfirm('您确定要删除该信息？', success);
                                            function success() {
                                                that.closest('dd').remove();
                                            }
                                        });
                                        // 付款方式选择
                                        jQuery("#payType").on("click", ".simulation-select", function () {
                                            var index = jQuery(this).closest("dd").index();
                                            that.getBasic(11, createType);
                                            function createType(list) {
                                                var box = document.querySelector(".select-dialog ul");
                                                var dom = "";
                                                for (var i = 0; i < list.length; i++) {
                                                    dom += "<li id='"+ list[i].id +"'>"+ list[i].attributeName +"</li>";
                                                }
                                                box.innerHTML = dom;
                                                document.querySelector(".select-dialog").style.display = "block";
                                                document.querySelector(".select-dialog").setAttribute("id", "payTypes");
                                                document.querySelector(".select-dialog").setAttribute("index", index);
                                            }
                                        });
                                        jQuery(".select-dialog").on("click", "li", function () {
                                            var text = this.innerHTML;
                                            var id = this.getAttribute("id");
                                            var boxID = this.parentNode.parentNode.parentNode.getAttribute("id");

                                            if (boxID == 'contractAwardCompanys') {
                                                that.obj.contractAwardCompany = id;
                                                document.querySelector("#contractAwardCompany").innerHTML = text;
                                            }
                                            if (boxID == 'categorys') {
                                                that.obj.category = id;
                                                document.querySelector("#category").innerHTML = text;
                                            }
                                            if (boxID == 'types') {
                                                that.obj.type = id;
                                                document.querySelector("#type").innerHTML = text;
                                            }
                                            if (boxID == 'payTypes') {
                                                var index = this.parentNode.parentNode.parentNode.getAttribute("index");
                                                jQuery("#payType dd").eq(index).find("span").html(text);
                                                jQuery("#payType dd").eq(index).attr("id", id);
                                            }
                                            document.querySelector(".select-dialog").style.display = "none";
                                            document.querySelector(".select-dialog").setAttribute("id", "");
                                            document.querySelector(".select-dialog").setAttribute("index", "");
                                        });
                                        // 备注
                                        jQuery("#contractMemo").val(thatData.contractMemo);
                                    }
                                }
                                function funPage380() {
                                    // 获取分包不通过内容
                                    $.ajax(global.apiURL + '/officeAudit/user/getAuditBusiness.htm', {
                                        data : {
                                            projectId: data.id,
                                            officeType : 56,
                                            manageType : 0,
                                            leaderType : 0,
                                            chiefType : 0,
                                            lawType : 0,
                                            financialType : 0
                                        },
                                        dataType : 'json',
                                        type : 'post',
                                        success : function(data){
                                            if (data.success) {
                                                that.show.fb.name = data.rows.basicData.attributeName + "不通过"
                                                that.show.fb.time = zjzm.getDay(data.rows.updateTime.time, "yyyy/MM/dd")
                                                that.show.fb.memo = data.rows.memo
                                                //myToast(data.resultMsg);
                                            }
                                        },
                                        error : function() {
                                            myToast("服务器正忙，请稍后重试！");
                                        }
                                    });
                                }
                                function funPage380O() {
                                    jQuery("#cancal, #true").hide();
                                    // 编辑/取消/提交
                                    jQuery("#edit").on("click", function () {
                                        jQuery(this).hide();
                                        jQuery("#cancal, #true").show();
                                        jQuery("#ratio").attr("readonly", false);
                                        jQuery("#ratio_memo").attr("readonly", false);
                                    });
                                    jQuery("#cancal").on("click", function () {
                                        jQuery("#cancal, #true").hide();
                                        jQuery("#edit").show();
                                        jQuery("#ratio").attr("readonly", true);
                                        jQuery("#ratio_memo").attr("readonly", true);
                                        jQuery("#ratio").val(that.obj.ratio);
                                        jQuery("#ratio_memo").val(that.obj.ratioMemo);
                                    });
                                    jQuery("#true").on("click", function () {
                                        var obj = {};
                                        obj.ratio = jQuery("#ratio").val();
                                        if (that.obj.ratio == obj.ratio) {
                                            obj.ratio = "";
                                        }
                                        obj.ratioMemo = jQuery("#ratio_memo").val();
                                        myLoading();
                                        $.ajax(global.apiURL + '/contract/user/applyRatio.htm', {
                                            data : {
                                                step : that.step,
                                                contractCapital: that.obj.contractCapital,
                                                projectId : that.id,
                                                ratio : obj.ratio,
                                                ratioMemo : obj.ratioMemo,
                                                contractNo : that.obj.contractNo
                                            },
                                            dataType : 'json',
                                            type : 'post',
                                            success : function(data){
                                                if (data.success) {
                                                    myOpenWindow("step-tab.html", "step");
                                                    myToast("修改成功");
                                                } else {
                                                    myToast(data.resultMsg);
                                                }
                                                myLoadingOver();
                                            },
                                            error : function() {
                                                myLoadingOver();
                                                myToast("服务器正忙，请稍后重试！");
                                            }
                                        });
                                    });

                                    // 获取合同信息
                                    $.ajax(global.apiURL + '/contract/user/contractList.htm', {
                                        data : {
                                            projectId: data.id,
                                            status : 1
                                        },
                                        dataType : 'json',
                                        type : 'post',
                                        success : function(data1){
                                            if (data1.success) {
                                                var datas = data1.data[0];
                                                that.obj.contractCapital = datas.contractCapital;
                                                if (datas.ratio) {
                                                    if (datas.ratio) {
                                                        jQuery("#ratio").val(datas.ratio);
                                                        that.obj.ratio = datas.ratio;
                                                    }
                                                    jQuery("#ratio_memo").val(datas.ratioMemo);
                                                    that.obj.ratioMemo = datas.ratioMemo;
                                                }
                                                that.obj.contractNo = datas.contractNo;
                                                //createPack(datas)
                                                createCashierConfirmation(datas.financialAudit)
                                                getPack(datas.contractCapital);
                                            } else {
                                                //myToast(data.resultMsg);
                                            }
                                        },
                                        error : function() {
                                            myToast("服务器正忙，请稍后重试！");
                                        }
                                    });
                                    // 创建团队分包
                                    function getPack(contractCapital) {
                                        $.ajax(global.apiURL + '/contract/user/getContractSubpackageInfo.htm', {
                                            data : {
                                                projectId: data.id
                                            },
                                            dataType : 'json',
                                            type : 'post',
                                            success : function(data){
                                                if (data.success) {
                                                   createPack(data.data, contractCapital);
                                                } else {
                                                    //myToast(data.resultMsg);
                                                }
                                            },
                                            error : function() {
                                                myToast("服务器正忙，请稍后重试！");
                                            }
                                        });
                                    }
                                    function createPack(datas, contractCapital) {
                                        var dom = "",
                                            box = jQuery("#pack");
                                        for (var i = 0; i < datas.length; i++) {
                                            if ( datas[i].status != 1) {
                                                jQuery("#notAudited").show();
                                            }
                                            var bill = (datas[i].subpackageCapital / contractCapital * 100).toFixed(2);
                                            if (!bill) {
                                                bill = 0;
                                            }
                                            dom += "<dd>"+
                                                "<span>"+ datas[i].subpackageLeaderName +"</span>"+
                                                "<span>"+ datas[i].subpackageCapital +"万元</span>"+
                                                "<span>"+ bill +"%</span>"+
                                                "<a href='javascript:void(0);' index='"+ i +"'>详细</a>";
                                            dom += "</dd>";
                                        }
                                        box.html(dom);
                                    }
                                    jQuery("#team-add").on("click", function () {
                                        mySetLocalStorage("projectLeader", that.projectLeader);
                                        mySetLocalStorage("contractPayment", that.contractPayment);
                                        myOpenWindow("team-info.html", "team");
                                    });
                                    jQuery("#pack").on("click", "a", function () {
                                        var index = jQuery(this).attr("index");
                                        mySetLocalStorage("pack", index);
                                        mySetLocalStorage("projectLeader", that.projectLeader);
                                        mySetLocalStorage("contractPayment", that.contractPayment);
                                        myOpenWindow("team-info.html", "team");
                                    });
                                    // 创建开票及到账情况
                                    function createCashierConfirmation(datas) {
                                        var dom = "<p><span class='light'></span><span class='light'>金额(万元)</span><span class='light'>申请</span><span class='light'>审核</span><span class='light'>到账</span></p>",
                                            box = jQuery("#cashierConfirmation");
                                        for (var i = 0; i < datas.length; i++) {
                                            var createTime = "";
                                            var cashierCreateTime = "";
                                            var cashierUpdateTime = "";
                                            if (datas[i].createTime) {
                                                createTime = zjzm.getDay(datas[i].createTime.time, "yyyy/MM/dd");
                                            }
                                            if (datas[i].cashierCreateTime) {
                                                cashierCreateTime = zjzm.getDay(datas[i].cashierCreateTime.time, "yyyy/MM/dd");
                                            }
                                            if (datas[i].cashierUpdateTime) {
                                                cashierUpdateTime = zjzm.getDay(datas[i].cashierUpdateTime.time, "yyyy/MM/dd");
                                            }
                                            var amount = formatCurrency1(datas[i].amount);
                                            dom += "<p>"+
                                                    "<span>"+ datas[i].financialPaymentModeName +"</span>"+
                                                    "<span>"+ amount +"</span>"+
                                                    "<span>"+ createTime +"</span>"+
                                                    "<span>"+ cashierCreateTime +"</span>"+
                                                    "<span>"+ cashierUpdateTime +"</span>"+
                                                "</em>"+
                                            "</p>";
                                        }
                                        box.html(dom);
                                    }
                                }
                            } else {
                                if (data.code == "405" && data.resultMsg == "请登录系统") {
                                    againLogin(that.getProduct, param);
                                } else {
                                    //myToast(data.resultMsg);
                                }
                            }
                            myLoadingOver();
                        },
                        error : function() {
                            myLoadingOver();
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                // 获取基础数据
                getBasic: function(id, cb) {
                    jQuery.ajax({
                        url: global.apiURL + "/company/user/getBasic.htm",
                        type: 'post',
                        dataType: 'json',
                        data: {
                            categoryId : id
                        },
                        success: function (data) {
                            if (data.success) {
                                cb(data.rows);
                            } else {
                                //myToast(data.resultMsg);
                            }
                        }
                    });
                },
                // 获取项目介绍人
                getintroducer : function () {
                    mui.ajax(global.apiURL + '/user/companyStaffs.htm', {
                        data : {},
                        dataType : 'json',
                        type : 'post',
                        success : function(data){
                            if (data.success) {
                                var datas = data.data;
                                var boxs = jQuery("#people");
                                var dom = "";
                                for (var i = 0; i < datas.length; i++) {
                                    dom += "<option value='"+ datas[i].userId +"'>"+ datas[i].userInfo.name +"</option>";
                                }
                                boxs.html(dom);
                            } else {
                                //myToast(data.resultMsg);
                            }
                        },
                        error : function() {
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                // 获取发包单位
                getCompanyAssociatedInfo: function () {
                    mui.ajax(global.apiURL + '/companyAssocited/user/getCompanyAssociatedInfo.htm', {
                        data : {},
                        dataType : 'json',
                        type : 'post',
                        success : function(data){
                            if (data.success) {
                                var box = jQuery("#contractAwardCompany");
                                var dom = "";
                                for (var i = 0; i < data.rows.length; i++) {
                                    dom += "<option value='"+ data.rows[i].id +"'>"+ data.rows[i].companyName +"</option>";
                                }
                                box.html(dom);
                            }
                        },
                        error : function() {
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                // 获取经营专员/报名制作人
                getProposer: function() {
                    mui.ajax(global.apiURL + '/user/companyStaffs.htm', {
                        data : {
                            jobId: 4
                        },
                        dataType : 'json',
                        type : 'post',
                        success : function(data){
                            if (data.success) {
                                var datas = data.data;
                                var box = jQuery("#managementPersonnel");
                                var boxs = jQuery("#people");
                                var boxss = jQuery("#biddingdocumentsProducer");
                                var boxsss = jQuery("#businessProducer");
                                var dom = "";
                                for (var i = 0; i < datas.length; i++) {
                                    dom += "<option value='"+ datas[i].userId +"'>"+ datas[i].userInfo.name +"</option>";
                                }
                                if (box) box.html(dom);
                                if (boxs) boxs.html(dom);
                                if (boxss) boxss.html(dom);
                                if (boxsss) boxsss.html(dom);
                            } else {
                                //myToast(data.resultMsg);
                            }
                        },
                        error : function() {
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                // 获取邀请人
                getstaffPersons: function getstaffPersons() {
                    $.ajax(global.apiURL + '/user/staffPersons.htm', {
                        data : {
                            jobId: 5,
                            personnelNature: 44
                        },
                        dataType : 'json',
                        type : 'post',
                        success : function(data){
                            if (data.success) {
                                var datas = data.data;
                                var box = jQuery("#inviterIds");
                                var boxs = jQuery("#proposerId");
                                var boxss = jQuery("#people");
                                var dom = "";
                                for (var i = 0; i < datas.length; i++) {
                                    dom += "<option value='"+ datas[i].userId +"'>"+ datas[i].userInfo.name +"</option>";
                                }
                                if (box) {
                                    box.html(dom);
                                }
                                if (boxs) {
                                    boxs.html(dom);
                                }
                                if (boxss) {
                                    boxss.html(dom);
                                }
                            } else {
                                //myToast(data.resultMsg);
                            }
                        },
                        error : function() {
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                // 文件上传
                fileUpLoad: function () {
                    var _this = this
                    // 文件上传
                    $(".upload-img").on("change", "input", function (event) {
                        var that = jQuery(this);
                        var fileArr = [];
                        var formData = new FormData();
                        var fileName;
                        for (var i = 0; i < jQuery('#fileAddress')[0].files.length; i++) {
                            var file = jQuery('#fileAddress')[0].files[i];
                            if (_this.fileName) {
                                _this.fileName = _this.fileName + "," + file.name;
                            } else {
                                _this.fileName = file.name;
                            }
                            fileArr.push(file);
                            formData.append('fileAddress', file);
                        }
                        $.ajax({
                            url: global.apiURL + '/fileUpLoad/user/fileUpLoad.htm',
                            type: 'POST',
                            cache: false,
                            data: formData,
                            processData: false,
                            contentType: false,
                            success : function (data) {
                                data = JSON.parse(data);
                                if (data.success) {
                                    if (_this.fileUrl) {
                                        _this.fileUrl = _this.fileUrl + "," + data.data[0];
                                    } else {
                                        _this.fileUrl = data.data[0];
                                    }
                                    that.siblings('img').attr({"src": data.data[0], "fileName": file.name});
                                }
                            }
                        });
                    });
                },
                // 文件查看
                downLoad: function(box, projectId, fileId) {
                    $.ajax(global.apiURL + '/fileUpLoad/user/getSpecifyFile.htm', {
                        data : {
                            projectId: projectId,
                            fileId : fileId
                        },
                        dataType : 'json',
                        type : 'post',
                        success : function(data){
                            var dom = "";
                            if (data.success) {
                                var datas = data.data;
                                var flagZip = 0;
                                var flagFile = 0;
                                if (datas.length) {
                                    for (var i = 0; i < datas.length; i++) {
                                        var arr = datas[i].fileAddress;
                                        if(arr.indexOf(".zip") >= 0 || arr.indexOf(".rar") >= 0) {
                                            flagZip++;
                                            dom += "<a href='javascript:void(0);'>压缩包"+ flagZip +"</a>";
                                        } else {
                                            flagFile++;
                                            if (datas.length == 1) {
                                                dom += "<a class='a' href='"+ arr +"'>文件</a>";
                                            } else {
                                                dom += "<a class='a' href='"+ arr +"'>文件"+ flagFile +"</a>";
                                            }
                                        }
                                    }
                                }
                            } else {
                                dom += "<em class='fail'>未上传</em>";
                            }
                            box.html(dom);
                        },
                        error : function() {
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                // 弹出层空白隐藏
                hideLayout: function () {
                    // 空白隐藏
                    document.querySelector(".select-mask").addEventListener("tap", function (event) {
                        document.querySelector(".select-dialog").style.display = "none";
                        document.querySelector(".select-dialog ul").innerHTML = '';
                        event.preventDefault();
                    });
                    jQuery("#cancel").on("click", function () {
                        document.querySelector(".select-dialog").style.display = "none";
                        document.querySelector(".select-dialog").setAttribute("id", "");
                        document.querySelector(".select-dialog").setAttribute("multi", "");
                    });
                },
                // 日期选择
                dataPicker: function(that, box) {
                    var optionsJson = that.getAttribute('data-options') || '{}';
                    var options = JSON.parse(optionsJson);
                    var picker = new mui.DtPicker(options);
                    picker.show(function(rs) {
                        step.$data.obj[box] = rs.y.value + rs.m.value + rs.d.value
                        document.querySelector("#" + box).innerHTML = rs.y.value + "/" + rs.m.value + "/" +rs.d.value;
                        picker.dispose();
                    });
                },
                // 汇报工作
                projectWork: function () {
                    var that = this;
                    myLoading();
                    $.ajax(global.apiURL + '/company/user/0/workReport.htm', {
                        data : {
                            projectId: that.projectId,
                            rows: 1,
                            page: 1
                        },
                        dataType : 'json',
                        type : 'post',
                        timeout : 10000,
                        success : function(data){
                            if (data.success) {
                                myOpenWindow("/tpl/work/projectDetail.html", "")
                            } else {
                                myToast("该项目至今未有任何工作汇报");
                            }
                            myLoadingOver();
                        },
                        error : function() {
                            myLoadingOver();
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                // step20提交申请
                step20Submit: function () {
                    var that = this;
                    var obj = {};
                    jQuery("input[name='passed-1']").each(function() {
                        if (jQuery(this).is(':checked')) {
                            obj.passed = jQuery(this).val();
                        }
                    });
                    // 通过
                    if (obj.passed == 1) {
                        obj.reason = "";
                        if (!that.obj.managementPersonnel) {
                            myToast("请选择经营专员");
                        } else if (!that.obj.applyDeadline) {
                            myToast("请选择截止日期");
                        } else if (jQuery("input[name='proposerId']").is(":checked") && !that.obj.proposerId) {
                            myToast("请选择建议人");
                        } else if (jQuery("input[name='inviterIds']").is(":checked") && !that.obj.inviterIds) {
                            myToast("请选择邀请人");
                        } else {
                            if (that.obj.inviterIds) {
                                if (that.obj.inviterIds.indexOf(that.obj.proposerId) >= 0) {
                                    that.obj.inviterIds = that.obj.inviterIds.split(",");
                                    for (var i = 0; i < that.obj.inviterIds.length; i++) {
                                        if (that.obj.inviterIds[i] == that.obj.proposerId) {
                                            that.obj.inviterIds.splice(i, 1);
                                        }
                                    }
                                    that.obj.inviterIds = that.obj.inviterIds.join(",");
                                }
                            } else {
                                that.obj.inviterIds = "";
                            }
                            funSubmit20();
                        }
                    } else {
                        // 不通过
                        that.obj.proposerId = "";
                        that.obj.inviterIds = "";
                        that.obj.managementPersonnel = "";
                        that.obj.applyDeadline = "";
                        obj.reason = jQuery("#reason").val();
                        funSubmit20();
                    }
                    // 提交
                    function funSubmit20() {
                        myLoading();
                        $.ajax(global.apiURL + '/project/user/approval.htm', {
                            data : {
                                companyId: that.companyId,
                                projectId: that.projectId,
                                proposerId: that.obj.proposerId,
                                inviterIds: that.obj.inviterIds,
                                managementPersonnel: that.obj.managementPersonnel,
                                applyDeadline : that.obj.applyDeadline,
                                reason: obj.reason,
                                passed: obj.passed
                            },
                            dataType : 'json',
                            type : 'post',
                            success : function(data){
                                if (data.success) {
                                    myOpenWindow("list.html", "list");
                                } else {
                                    myToast(data.resultMsg);
                                }
                                myLoadingOver();
                            },
                            error : function() {
                                myLoadingOver();
                                myToast("服务器正忙，请稍后重试！");
                            }
                        });
                    }
                },
                // step30提交申请
                step30Submit: function () {
                    var that = this;
                    var obj = {};
                    obj.reason = jQuery("#reason").val();
                    obj.content = jQuery("#content").val();
                    jQuery("input[name='passed-2']").each(function() {
                        if (jQuery(this).is(':checked')) {
                            obj.passed = jQuery(this).val();
                        }
                    });
                    if (obj.passed == 1 && !obj.content) {
                        myToast("项目计划不能为空");
                    } else {
                        myLoading();
                        $.ajax(global.apiURL + '/project/user/schemaApply.htm', {
                            data : {
                                projectId: that.projectId,
                                content: obj.content,
                                reason: obj.reason,
                                passed: obj.passed
                            },
                            dataType : 'json',
                            type : 'post',
                            success : function(data){
                                if (data.success) {
                                    myOpenWindow("list.html", "list");
                                } else {
                                    myToast(data.resultMsg);
                                }
                                myLoadingOver();
                            },
                            error : function() {
                                myLoadingOver();
                                myToast("服务器正忙，请稍后重试！");
                            }
                        });
                    }
                },
                // step40提交申请
                step40Submit: function () {
                    var that = this;
                    var obj = {};
                    if (jQuery("#people-radio").is(':checked')) {
                        if (that.obj.people) {
                            obj.proposerId = that.obj.people;
                        } else {
                            myToast("请选择直接指定人员")
                        }
                    } else {
                        jQuery("#leaderList input").each(function () {
                            if (jQuery(this).is(':checked')) {
                                obj.proposerId = jQuery(this).val();
                            }
                        });
                    }
                    obj.reason = jQuery("#reason").val();
                    jQuery("input[name='passed-3']").each(function() {
                        if (jQuery(this).is(':checked')) {
                            obj.passed = jQuery(this).val();
                        }
                    });
                    if (jQuery("#status").is(':checked')) {
                        obj.status = 1;
                    } else {
                        obj.status = 0;
                    }
                    obj.content = jQuery("#content").val();
                    myLoading();
                    $.ajax(global.apiURL + '/project/user/projectLeader.htm', {
                        data : {
                            companyId: that.companyId,
                            projectId: that.projectId,
                            reason: obj.reason,
                            passed: obj.passed,
                            content: obj.content,
                            proposerId : obj.proposerId,
                            status : obj.status
                        },
                        dataType : 'json',
                        type : 'post',
                        success : function(data){
                            if (data.success) {
                                myOpenWindow("list.html", "list");
                            } else {
                                myToast(data.resultMsg);
                            }
                            myLoadingOver();
                        },
                        error : function() {
                            myLoadingOver();
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                // step50提交申请
                step50Submit: function () {
                    var that = this;
                    var obj = {};
                    var file = true;
                    obj.deadline = that.obj.deadline;
                    obj.memo = jQuery("#memo").val();
                    if (jQuery(".downLoad-1").text().indexOf("未上传") >= 0) {
                        myToast("请上传招标公告");
                    } else if (!that.obj.deadline) {
                        myToast("请选择报名截至日期");
                    } else {
                        myLoading();
                        $.ajax(global.apiURL + '/project/user/bidingAd.htm', {
                            data : {
                                id : that.id,
                                deadline : obj.deadline,
                                memo : obj.memo
                            },
                            dataType : 'json',
                            type : 'post',
                            success : function(data){
                                if (data.success) {
                                    myOpenWindow("list.html", "list");
                                } else {
                                    myToast(data.resultMsg);
                                }
                                myLoadingOver();
                            },
                            error : function() {
                                myLoadingOver();
                                myToast("服务器正忙，请稍后重试！");
                            }
                        });
                    }
                },
                // step60提交申请
                step60Submit: function () {
                    var that = this;
                    var obj = {};
                    if (jQuery(".downLoad-2").text().indexOf("未上传") >= 0) {
                        myToast("请上传报名拟定");
                    } else {
                        myLoading();
                        $.ajax(global.apiURL + '/project/user/entryFile.htm', {
                            data : {
                                id : that.id
                            },
                            dataType : 'json',
                            type : 'post',
                            success : function(data){
                                if (data.success) {
                                    myOpenWindow("list.html", "list");
                                } else {
                                    myToast(data.resultMsg);
                                }
                                myLoadingOver();
                            },
                            error : function() {
                                myLoadingOver();
                                myToast("服务器正忙，请稍后重试！");
                            }
                        });
                    }
                },
                // step70提交申请
                step70SubmitTrue: function () {
                    var that = this;
                    var obj = {};

                    obj.status = 1;
                    obj.memo = "";
                    if (!that.subStep) {
                        that.subStep = "";
                    }

                    myLoading();
                    $.ajax(global.apiURL + '/manageAudit/user/updateManageAudit.htm', {
                        data : {
                            projectId : that.projectId,
                            step : that.step,
                            subStep : that.subStep,
                            status: obj.status ,
                            type: 46,
                            memo: obj.memo
                        },
                        dataType : 'json',
                        type : 'post',
                        success : function(data){
                            if (data.success) {
                                myOpenWindow("list.html", "list");
                            } else {
                                //myToast(data.resultMsg);
                            }
                            myLoadingOver();
                        },
                        error : function() {
                            myLoadingOver();
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                step70SubmitFalse: function () {
                    var that = this;
                    var obj = {};
                    obj.status  = 2;
                    if (!that.subStep) {
                        that.subStep = "";
                    }
                    var btnArray = ['返回', '提交'];
                    mui.prompt('请输入不通过理由', '', '提示', btnArray, function(e) {
                        if (e.index == 1) {
                            obj.memo = e.value;
                            myLoading();
                            $.ajax(global.apiURL + '/manageAudit/user/updateManageAudit.htm', {
                                data : {
                                    projectId : that.projectId,
                                    step : that.step,
                                    subStep : that.subStep,
                                    status: obj.status ,
                                    type: 46,
                                    memo: obj.memo
                                },
                                dataType : 'json',
                                type : 'post',
                                success : function(data){
                                    if (data.success) {
                                        myOpenWindow("list.html", "list");
                                    } else {
                                        //myToast(data.resultMsg);
                                    }
                                    myLoadingOver();
                                },
                                error : function() {
                                    myLoadingOver();
                                    myToast("服务器正忙，请稍后重试！");
                                }
                            });
                        }
                    })
                },
                // step80提交申请
                step80SubmitTrue: function () {
                    var that = this;
                    var obj = {};
                    obj.status = 1;
                    if (!that.subStep) {
                        that.subStep = "";
                    }

                    myLoading();
                    $.ajax(global.apiURL + '/leaderAudit/user/updateLeaderAudit.htm', {
                        data : {
                            projectId : that.projectId,
                            step : that.step,
                            status: obj.status ,
                            type: 69,
                            memo : obj.memo
                        },
                        dataType : 'json',
                        type : 'post',
                        success : function(data){
                            if (data.success) {
                                myOpenWindow("list.html", "list");
                            } else {
                                //myToast(data.resultMsg);
                            }
                            myLoadingOver();
                        },
                        error : function() {
                            myLoadingOver();
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                step80SubmitFalse: function () {
                    var that = this;
                    var obj = {};
                    obj.status  = 2;
                    if (!that.subStep) {
                        that.subStep = "";
                    }
                    var btnArray = ['返回', '提交'];
                    mui.prompt('请输入不通过理由', '', '提示', btnArray, function(e) {
                        if (e.index == 1) {
                            obj.memo = e.value;
                            myLoading();
                            $.ajax(global.apiURL + '/leaderAudit/user/updateLeaderAudit.htm', {
                                data : {
                                    projectId : that.projectId,
                                    step : that.step,
                                    status: obj.status ,
                                    type: 69,
                                    memo : obj.memo
                                },
                                dataType : 'json',
                                type : 'post',
                                success : function(data){
                                    if (data.success) {
                                        myOpenWindow("list.html", "list");
                                    } else {
                                        //myToast(data.resultMsg);
                                    }
                                    myLoadingOver();
                                },
                                error : function() {
                                    myLoadingOver();
                                    myToast("服务器正忙，请稍后重试！");
                                }
                            });
                        }
                    })
                },
                // step90提交申请
                step90Submit: function () {
                    var obj = {};
                    var that = this
                    obj.status = 1;
                    myLoading();
                    $.ajax(global.apiURL + '/administrativeSeal/user/updateAdministrativeSeal.htm', {
                        data : {
                            projectId : that.projectId,
                            step : that.step,
                            status: obj.status ,
                            type: 33
                        },
                        dataType : 'json',
                        type : 'post',
                        success : function(data){
                            if (data.success) {
                                myOpenWindow("list.html", "list");
                            } else {
                                //myToast(data.resultMsg);
                            }
                            myLoadingOver();
                        },
                        error : function() {
                            myLoadingOver();
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                // step100提交申请
                step100Submit: function () {
                    var that = this;
                    var obj = {};
                    obj.userId = that.obj.people;
                    jQuery("input[name='status']").each(function () {
                        if (jQuery(this).is(':checked')) {
                            obj.status = jQuery(this).val();

                        }
                    });
                    obj.memo = that.obj.failResult;
                    if (jQuery(".downLoad-3").text().indexOf("未上传") >= 0) {
                        myToast("请上传报名文件");
                    } else if (!obj.userId) {
                        myToast("请选择报名文件制作人");
                    } else if (obj.status == 0 && obj.memo == undefined) {
                        myToast("请选择报名失败原因");
                    } else {
                        myLoading();
                        $.ajax(global.apiURL + '/project/user/entryFile.htm', {
                            data : {
                                id : that.id,
                                userId : obj.userId,
                                status: obj.status,
                                memo : obj.memo
                            },
                            dataType : 'json',
                            type : 'post',
                            success : function(data){
                                if (data.success) {
                                    myOpenWindow("list.html", "list");
                                } else {
                                    myToast(data.resultMsg);
                                }
                                myLoadingOver();
                            },
                            error : function() {
                                myLoadingOver();
                                myToast("服务器正忙，请稍后重试！");
                            }
                        });
                    }
                },
                // step110提交申请
                step110Submit: function () {
                    var that = this;
                    var obj = {};
                    obj.marginDeadline =  that.obj.marginDeadline;
                    obj.tenderDeadline = that.obj.tenderDeadline;
                    obj.memo = jQuery("#memo").val();
                    if (jQuery("#zb-box input[name='status']").is(':checked')) {
                        obj.status = 1;
                    } else {
                        obj.status = 0;
                    }
                    if (jQuery(".downLoad-4").text().indexOf("未上传") >= 0) {
                        myToast("请上传招标文件");
                    } else if (!obj.marginDeadline) {
                        myToast("请选择保证金截止日期");
                    } else if (!obj.tenderDeadline) {
                        myToast("请选择投标截止日期");
                    } else {
                        myLoading();
                        $.ajax(global.apiURL + '/project/user/bidingFile.htm', {
                            data : {
                                id : that.id,
                                status: obj.status,
                                marginDeadline: obj.marginDeadline,
                                tenderDeadline: obj.tenderDeadline,
                                memo : obj.memo
                            },
                            dataType : 'json',
                            type : 'post',
                            success : function(data){
                                if (data.success) {
                                    myOpenWindow("list.html", "list");
                                } else {
                                    myToast(data.resultMsg);
                                }
                                myLoadingOver();
                            },
                            error : function() {
                                myLoadingOver();
                                myToast("服务器正忙，请稍后重试！");
                            }
                        });
                    }
                },
                // step120提交申请
                step120Submit: function () {
                    var that = this;
                    var obj = {};
                    obj.bail = jQuery("#bail").val();
                    obj.latestRemittanceDate = that.obj.latestRemittanceDate;
                    obj.remittanceCompany = jQuery("#remittanceCompany").val();
                    obj.bankName = jQuery("#bankName").val();
                    obj.accountNo = jQuery("#accountNo").val();
                    obj.bailMemo = jQuery("#bailMemo").val();
                    if (!obj.bail) {
                        myToast("请输入大于0元的保证金");
                    } else if (!obj.latestRemittanceDate) {
                        myToast("请输选择最晚汇款日期");
                    } else if (!obj.remittanceCompany) {
                        myToast("请输入汇款单位");
                    } else if (!obj.bankName) {
                        myToast("请输开户行");
                    } else if (!obj.accountNo) {
                        myToast("请输账号");
                    } else {
                        myLoading();
                        $.ajax(global.apiURL + '/project/user/applyBail.htm', {
                            data : {
                                id : that.id,
                                bail: obj.bail,
                                latestRemittanceDate: obj.latestRemittanceDate,
                                remittanceCompany: obj.remittanceCompany,
                                bankName : obj.bankName,
                                accountNo : obj.accountNo,
                                bailMemo : obj.bailMemo
                            },
                            dataType : 'json',
                            type : 'post',
                            success : function(data){
                                if (data.success) {
                                    myOpenWindow("list.html", "list");
                                } else {
                                    myToast(data.resultMsg);
                                }
                                myLoadingOver();
                            },
                            error : function() {
                                myLoadingOver();
                                myToast("服务器正忙，请稍后重试！");
                            }
                        });
                    }
                },
                // step130提交申请
                step130SubmitTrue: function () {
                    var that = this;
                    var obj = {};
                    obj.status = 1;
                    obj.memo = "";
                    myLoading();
                    $.ajax(global.apiURL + '/manageAudit/user/updateManageAudit.htm', {
                        data : {
                            projectId : that.projectId,
                            subStep : that.subStep,
                            status: obj.status,
                            type: 47,
                            memo: obj.memo
                        },
                        dataType : 'json',
                        type : 'post',
                        success : function(data){
                            if (data.success) {
                                myOpenWindow("list.html", "list");
                            } else {
                                myToast(data.resultMsg);
                            }
                            myLoadingOver();
                        },
                        error : function() {
                            myLoadingOver();
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                step130SubmitFalse: function () {
                    var that = this;
                    var obj = {};
                    obj.status = 2;
                    var btnArray = ['返回', '提交'];
                    mui.prompt('请输入不通过理由', '', '提示', btnArray, function(e) {
                        if (e.index == 1) {
                            obj.memo = e.value;
                            myLoading();
                            $.ajax(global.apiURL + '/manageAudit/user/updateManageAudit.htm', {
                                data : {
                                    projectId : that.projectId,
                                    step : that.step,
                                    status: obj.status ,
                                    type: 47,
                                    memo : obj.memo
                                },
                                dataType : 'json',
                                type : 'post',
                                success : function(data){
                                    if (data.success) {
                                        myOpenWindow("list.html", "list");
                                    } else {
                                        myToast(data.resultMsg);
                                    }
                                    myLoadingOver();
                                },
                                error : function() {
                                    myLoadingOver();
                                    myToast("服务器正忙，请稍后重试！");
                                }
                            });
                        }
                    })
                },
                // step140提交申请
                step140SubmitTrue: function () {
                    var that = this;
                    var obj = {};
                    obj.status = 1;
                    myLoading();
                    $.ajax(global.apiURL + '/leaderAudit/user/updateLeaderAudit.htm', {
                        data : {
                            projectId : that.projectId,
                            subStep : that.subStep,
                            status: obj.status ,
                            type: 70,
                            memo : obj.memo
                        },
                        dataType : 'json',
                        type : 'post',
                        success : function(data){
                            if (data.success) {
                                myOpenWindow("list.html", "list");
                            } else {
                                myToast(data.resultMsg);
                            }
                            myLoadingOver();
                        },
                        error : function() {
                            myLoadingOver();
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                step140SubmitFalse: function () {
                    var that = this;
                    var obj = {};
                    obj.status  = 2;
                    var btnArray = ['返回', '提交'];
                    mui.prompt('请输入不通过理由', '', '提示', btnArray, function(e) {
                        if (e.index == 1) {
                            obj.memo = e.value;
                            myLoading();
                            $.ajax(global.apiURL + '/leaderAudit/user/updateLeaderAudit.htm', {
                                data : {
                                    projectId : that.projectId,
                                    subStep : that.subStep,
                                    status: obj.status ,
                                    type: 70,
                                    memo : obj.memo
                                },
                                dataType : 'json',
                                type : 'post',
                                success : function(data){
                                    if (data.success) {
                                        myOpenWindow("list.html", "list");
                                    } else {
                                        myToast(data.resultMsg);
                                    }
                                    myLoadingOver();
                                },
                                error : function() {
                                    myLoadingOver();
                                    myToast("服务器正忙，请稍后重试！");
                                }
                            });
                        }
                    })
                },
                // step150提交申请
                step150SubmitTrue: function () {
                    var that = this;
                    var obj = {};
                    obj.status = 1;
                    obj.memo = "";
                    myLoading();
                    $.ajax(global.apiURL + '/financialAudit/user/updateChiefAuditById.htm', {
                        data : {
                            projectId : that.projectId,
                            subStep : that.subStep,
                            status: obj.status ,
                            type: 26,
                            memo : obj.memo
                        },
                        dataType : 'json',
                        type : 'post',
                        success : function(data){
                            if (data.success) {
                                myOpenWindow("list.html", "list");
                            } else {
                                myToast(data.resultMsg);
                            }
                            myLoadingOver();
                        },
                        error : function() {
                            myLoadingOver();
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                step150SubmitFalse: function () {
                    var that = this;
                    var obj = {};
                    obj.status  = 2;
                    var btnArray = ['返回', '提交'];
                    mui.prompt('请输入不通过理由', '', '提示', btnArray, function(e) {
                        if (e.index == 1) {
                            obj.memo = e.value;
                            myLoading();
                            $.ajax(global.apiURL + '/financialAudit/user/updateChiefAuditById.htm', {
                                data : {
                                    projectId : that.projectId,
                                    subStep : that.subStep,
                                    status: obj.status ,
                                    type: 26,
                                    memo : obj.memo
                                },
                                dataType : 'json',
                                type : 'post',
                                success : function(data){
                                    if (data.success) {
                                        myOpenWindow("list.html", "list");
                                    } else {
                                        myToast(data.resultMsg);
                                    }
                                    myLoadingOver();
                                },
                                error : function() {
                                    myLoadingOver();
                                    myToast("服务器正忙，请稍后重试！");
                                }
                            });
                        }
                    })
                },
                // step160提交申请
                step160SubmitTrue: function () {
                    var that = this;
                    var obj = {};
                    obj.status = 1;
                    obj.memo = "";
                    myLoading();
                    $.ajax(global.apiURL + '/officeAudit/user/updateOfficeAuditById.htm', {
                        data : {
                            projectId : that.projectId,
                            subStep : that.subStep,
                            status: obj.status ,
                            type: 52,
                            memo : obj.memo
                        },
                        dataType : 'json',
                        type : 'post',
                        success : function(data){
                            if (data.success) {
                                myOpenWindow("list.html", "list");
                            } else {
                                //myToast(data.resultMsg);
                            }
                            myLoadingOver();
                        },
                        error : function() {
                            myLoadingOver();
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                step160SubmitFalse: function () {
                    var that = this;
                    var obj = {};
                    obj.status  = 2;
                    if (!that.subStep) {
                        that.subStep = "";
                    }
                    var btnArray = ['返回', '提交'];
                    mui.prompt('请输入不通过理由', '', '提示', btnArray, function(e) {
                        if (e.index == 1) {
                            obj.memo = e.value;
                            myLoading();
                            $.ajax(global.apiURL + '/officeAudit/user/updateOfficeAuditById.htm', {
                                data : {
                                    projectId : that.projectId,
                                    subStep : that.subStep,
                                    status: obj.status ,
                                    type: 52,
                                    memo : obj.memo
                                },
                                dataType : 'json',
                                type : 'post',
                                success : function(data){
                                    if (data.success) {
                                        myOpenWindow("list.html", "list");
                                    } else {
                                        //myToast(data.resultMsg);
                                    }
                                    myLoadingOver();
                                },
                                error : function() {
                                    myLoadingOver();
                                    myToast("服务器正忙，请稍后重试！");
                                }
                            });
                        }
                    })
                },
                // step170提交申请
                step170Submit: function () {
                    var that = this;
                    var obj = {};
                    obj.status = 1;
                    if (!that.subStep) {
                        that.subStep = "";
                    }
                    myLoading();
                    $.ajax(global.apiURL + '/cashierConfirmation/user/updateCashierConfirmationById.htm', {
                        data : {
                            projectId : that.projectId,
                            step: that.listStep,
                            subStep : that.subStep,
                            subStep2 : that.subStep2,
                            status: obj.status,
                            type: 30,
                            haveTechnical : that.haveTechnical
                        },
                        dataType : 'json',
                        type : 'post',
                        success : function(data){
                            if (data.success) {
                                myOpenWindow("list.html", "list");
                            } else {
                                myToast(data.resultMsg);
                            }
                            myLoadingOver();
                        },
                        error : function() {
                            myLoadingOver();
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                // step190提交申请
                step190Submit: function () {
                    var that = this
                    if (jQuery(".downLoad-5").text().indexOf("未上传") >= 0) {
                        myToast("请上传商务标拟定版");
                    } else {
                        myLoading();
                        $.ajax(global.apiURL + '/project/user/commercialBid.htm', {
                            data : {
                                id : that.id                        },
                            dataType : 'json',
                            type : 'post',
                            success : function(data){
                                if (data.success) {
                                    myOpenWindow("list.html", "list");
                                } else {
                                    myToast(data.resultMsg);
                                }
                                myLoadingOver();
                            },
                            error : function() {
                                myLoadingOver();
                                myToast("服务器正忙，请稍后重试！");
                            }
                        });
                    }
                },
                // step200提交申请
                step200SubmitTrue: function () {
                    var that = this;
                    var obj = {};
                    obj.status = 1;
                    obj.memo = "";
                    myLoading();
                    $.ajax(global.apiURL + '/manageAudit/user/updateManageAudit.htm', {
                        data : {
                            projectId : that.projectId,
                            step : that.listStep,
                            status: obj.status ,
                            type: 48,
                            memo : obj.memo
                        },
                        dataType : 'json',
                        type : 'post',
                        success : function(data){
                            if (data.success) {
                                myOpenWindow("list.html", "list");
                            } else {
                                myToast(data.resultMsg);
                            }
                            myLoadingOver();
                        },
                        error : function() {
                            myLoadingOver();
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                step200SubmitFalse: function () {
                    var that = this;
                    var obj = {};
                    obj.status  = 2;
                    var btnArray = ['返回', '提交'];
                    mui.prompt('请输入不通过理由', '', '提示', btnArray, function(e) {
                        if (e.index == 1) {
                            obj.memo = e.value;
                            myLoading();
                            $.ajax(global.apiURL + '/manageAudit/user/updateManageAudit.htm', {
                                data : {
                                    projectId : that.projectId,
                                    step : that.listStep,
                                    status: obj.status ,
                                    type: 48,
                                    memo : obj.memo
                                },
                                dataType : 'json',
                                type : 'post',
                                success : function(data){
                                    if (data.success) {
                                        myOpenWindow("list.html", "list");
                                    } else {
                                        myToast(data.resultMsg);
                                    }
                                    myLoadingOver();
                                },
                                error : function() {
                                    myLoadingOver();
                                    myToast("服务器正忙，请稍后重试！");
                                }
                            });
                        }
                    })
                },
                // step210提交申请
                step210SubmitTrue: function () {
                    var that = this;
                    var obj = {};
                    obj.status = 1;
                    myLoading();
                    mui.ajax(global.apiURL + '/leaderAudit/user/updateLeaderAudit.htm', {
                        data : {
                            projectId : that.projectId,
                            step : that.listStep,
                            status: obj.status,
                            isMajorProject: that.isMajorProject,
                            type: 71
                        },
                        dataType : 'json',
                        type : 'post',
                        success : function(data){
                            if (data.success) {
                                myOpenWindow("list.html", "list");
                            } else {
                                myToast(data.resultMsg);
                            }
                            myLoadingOver();
                        },
                        error : function() {
                            myLoadingOver();
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                step210SubmitFalse: function () {
                    var that = this;
                    var obj = {};
                    obj.status  = 2;
                    var btnArray = ['返回', '提交'];
                    mui.prompt('请输入不通过理由', '', '提示', btnArray, function(e) {
                        if (e.index == 1) {
                            obj.memo = e.value;
                            myLoading();
                            $.ajax(global.apiURL + '/leaderAudit/user/updateLeaderAudit.htm', {
                                data : {
                                    projectId : that.projectId,
                                    step : that.listStep,
                                    status: obj.status,
                                    type: 71,
                                    isMajorProject: that.isMajorProject,
                                    memo : obj.memo
                                },
                                dataType : 'json',
                                type : 'post',
                                success : function(data){
                                    if (data.success) {
                                        myOpenWindow("list.html", "list");
                                    } else {
                                        myToast(data.resultMsg);
                                    }
                                    myLoadingOver();
                                },
                                error : function() {
                                    myLoadingOver();
                                    myToast("服务器正忙，请稍后重试！");
                                }
                            });
                        }
                    })
                },
                // step220提交申请
                step220SubmitTrue: function () {
                    var that = this;
                    var obj = {};
                    obj.status = 1;
                    myLoading();
                    $.ajax(global.apiURL + '/officeAudit/user/updateOfficeAuditById.htm', {
                        data : {
                            projectId : that.projectId,
                            step : that.listStep,
                            status: obj.status ,
                            type: 53,
                            memo : obj.memo
                        },
                        dataType : 'json',
                        type : 'post',
                        success : function(data){
                            if (data.success) {
                                myOpenWindow("list.html", "list");
                            } else {
                                myToast(data.resultMsg);
                            }
                            myLoadingOver();
                        },
                        error : function() {
                            myLoadingOver();
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                step220SubmitFalse: function () {
                    var that = this;
                    var obj = {};
                    obj.status  = 2;
                    var btnArray = ['返回', '提交'];
                    mui.prompt('请输入不通过理由', '', '提示', btnArray, function(e) {
                        if (e.index == 1) {
                            obj.memo = e.value;
                            myLoading();
                            $.ajax(global.apiURL + '/officeAudit/user/updateOfficeAuditById.htm', {
                                data : {
                                    projectId : that.projectId,
                                    step : that.listStep,
                                    status: obj.status ,
                                    type: 53,
                                    memo : obj.memo
                                },
                                dataType : 'json',
                                type : 'post',
                                success : function(data){
                                    if (data.success) {
                                        myOpenWindow("list.html", "list");
                                    } else {
                                        myToast(data.resultMsg);
                                    }
                                    myLoadingOver();
                                },
                                error : function() {
                                    myLoadingOver();
                                    myToast("服务器正忙，请稍后重试！");
                                }
                            });
                        }
                    })
                },
                // step230提交申请
                step230Submit: function () {
                    var that = this
                    var obj = {};
                    obj.status = 1;
                    if (that.subStep2 == 0) {
                        that.subStep2 = "";
                    }
                    if (that.subStep != 275) {
                        myAlert("保证金未打款");
                    } else {
                        myLoading();
                        $.ajax(global.apiURL + '/administrativeSeal/user/updateAdministrativeSeal.htm', {
                            data : {
                                projectId : that.projectId,
                                step : that.listStep,
                                status: obj.status ,
                                type: 34,
                                subStep : that.subStep,
                                subStep2 : that.subStep2
                            },
                            dataType : 'json',
                            type : 'post',
                            success : function(data){
                                if (data.success) {
                                    myOpenWindow("list.html", "list");
                                } else {
                                    myToast(data.resultMsg);
                                }
                                myLoadingOver();
                            },
                            error : function() {
                                myLoadingOver();
                                myToast("服务器正忙，请稍后重试！");
                            }
                        });
                    }
                },
                // step240提交申请
                step240Submit: function () {
                    var that = this
                    if (jQuery(".downLoad-7").text().indexOf("未上传") >= 0) {
                        myToast("请上传技术标拟定版");
                    } else {
                        myLoading();
                        $.ajax(global.apiURL + '/project/user/shemaTechnicalFileChiefUpd.htm', {
                            data : {
                                id : that.id,
                                type: 57
                            },
                            dataType : 'json',
                            type : 'post',
                            success : function(data){
                                if (data.success) {
                                    myOpenWindow("list.html", "list");
                                } else {
                                    myToast(data.resultMsg);
                                }
                                myLoadingOver();
                            },
                            error : function() {
                                myLoadingOver();
                                myToast("服务器正忙，请稍后重试！");
                            }
                        });
                    }
                },
                // step250提交申请
                step250SubmitTrue: function () {
                    var that = this
                    var obj = {};
                    obj.status = 1;
                    obj.memo = "";

                    myLoading();
                    $.ajax(global.apiURL + '/chiefAudit/user/updateChiefAuditById.htm', {
                        data : {
                            projectId : that.projectId,
                            subStep2 : that.subStep2,
                            status: obj.status ,
                            type: 57,
                            isMajorProject: that.isMajorProject,
                            memo : obj.memo
                        },
                        dataType : 'json',
                        type : 'post',
                        success : function(data){
                            if (data.success) {
                                myOpenWindow("list.html", "list");
                            } else {
                                myToast(data.resultMsg);
                            }
                            myLoadingOver();
                        },
                        error : function() {
                            myLoadingOver();
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                step250SubmitFalse: function () {
                    var that = this;
                    var obj = {};
                    obj.status  = 2;
                    var btnArray = ['返回', '提交'];
                    mui.prompt('请输入不通过理由', '', '提示', btnArray, function(e) {
                        if (e.index == 1) {
                            obj.memo = e.value;
                            myLoading();
                            $.ajax(global.apiURL + '/chiefAudit/user/updateChiefAuditById.htm', {
                                data : {
                                    projectId : that.projectId,
                                    subStep2 : that.subStep2,
                                    status: obj.status,
                                    type: 57,
                                    isMajorProject: that.isMajorProject,
                                    memo : obj.memo
                                },
                                dataType : 'json',
                                type : 'post',
                                success : function(data){
                                    if (data.success) {
                                        myOpenWindow("list.html", "list");
                                    } else {
                                        myToast(data.resultMsg);
                                    }
                                    myLoadingOver();
                                },
                                error : function() {
                                    myLoadingOver();
                                    myToast("服务器正忙，请稍后重试！");
                                }
                            });
                        }
                    })
                },
                // step260提交申请
                step260SubmitTrue: function () {
                    var that = this;
                    var obj = {};
                    obj.status = 1;
                    if (!that.subStep2) {
                        that.subStep2 = "";
                    }

                    myLoading();
                    $.ajax(global.apiURL + '/officeAudit/user/updateOfficeAuditById.htm', {
                        data : {
                            projectId : that.projectId,
                            subStep2 : that.subStep2,
                            status: obj.status ,
                            type: 54,
                            memo : obj.memo
                        },
                        dataType : 'json',
                        type : 'post',
                        success : function(data){
                            if (data.success) {
                                myOpenWindow("list.html", "list");
                            } else {
                                //myToast(data.resultMsg);
                            }
                            myLoadingOver();
                        },
                        error : function() {
                            myLoadingOver();
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                step260SubmitFalse: function () {
                    var that = this;
                    var obj = {};
                    obj.status  = 2;
                    if (!that.subStep2) {
                        that.subStep2 = "";
                    }
                    var btnArray = ['返回', '提交'];
                    mui.prompt('请输入不通过理由', '', '提示', btnArray, function(e) {
                        if (e.index == 1) {
                            obj.memo = e.value;
                            myLoading();
                            $.ajax(global.apiURL + '/officeAudit/user/updateOfficeAuditById.htm', {
                                data : {
                                    projectId : that.projectId,
                                    subStep2 : that.subStep2,
                                    status: obj.status ,
                                    type: 54,
                                    memo : obj.memo
                                },
                                dataType : 'json',
                                type : 'post',
                                success : function(data){
                                    if (data.success) {
                                        myOpenWindow("list.html", "list");
                                    } else {
                                        //myToast(data.resultMsg);
                                    }
                                    myLoadingOver();
                                },
                                error : function() {
                                    myLoadingOver();
                                    myToast("服务器正忙，请稍后重试！");
                                }
                            });
                        }
                    })
                },
                // step270提交申请
                step270Submit: function () {
                    var that = this
                    var obj = {};
                    obj.status = 1;
                    if (that.subStep != 275) {
                        myAlert("保证金未打款");
                    } else {
                        myLoading();
                        $.ajax(global.apiURL + '/administrativeSeal/user/updateAdministrativeSeal.htm', {
                            data : {
                                projectId : that.projectId,
                                status: obj.status ,
                                type: 35,
                                subStep : that.subStep,
                                subStep2 : that.subStep2,
                                step : that.listStep,
                                haveTechnical : 1
                            },
                            dataType : 'json',
                            type : 'post',
                            success : function(data){
                                if (data.success) {
                                    myOpenWindow("list.html", "list");
                                } else {
                                    //myToast(data.resultMsg);
                                }
                                myLoadingOver();
                            },
                            error : function() {
                                myLoadingOver();
                                myToast("服务器正忙，请稍后重试！");
                            }
                        });
                    }
                },
                // step280提交申请
                step280Submit: function () {
                    var that = this
                    var obj = {};
                    obj.userId = that.obj.businessProducer;
                    obj.tenderOffer = jQuery("#tenderOffer").val();
                    if (jQuery(".downLoad-6").text().indexOf("未上传") >= 0) {
                        myToast("请上传商务标");
                    } else if (that.haveTechnical && jQuery(".downLoad-8").text().indexOf("未上传") >= 0) {
                        myToast("请上传技术标");
                    } else if (!obj.userId) {
                        myToast("请选择商务标制作人");
                    } else if (!obj.tenderOffer) {
                        myToast("请输入投标报价");
                    } else {
                        myLoading();
                        $.ajax(global.apiURL + '/project/user/tenderFile.htm', {
                            data : {
                                id : that.id,
                                userId: obj.userId,
                                tenderMoney: obj.tenderOffer
                            },
                            dataType : 'json',
                            type : 'post',
                            success : function(data){
                                if (data.success) {
                                    myOpenWindow("list.html", "list");
                                } else {
                                    myToast(data.resultMsg);
                                }
                                myLoadingOver();
                            },
                            error : function() {
                                myLoadingOver();
                                myToast("服务器正忙，请稍后重试！");
                            }
                        });
                    }
                },
                // step290提交申请
                step290Submit: function () {
                    //0:未开标 1:中标 2:未中标
                    var that = this
                    var obj = {};
                    jQuery("input[name='bid']").each(function () {
                        if (jQuery(this).is(':checked')) {
                            obj.passed = jQuery(this).val();
                        }
                    });
                    var index = jQuery("#bidList li").eq(0).find("span").eq(0).html();
                    var bidCompany = jQuery("#bidList li").eq(0).attr("bidCompany");
                    if (obj.passed == 1) {
                        if (bidCompany != "999999") {
                            myToast("中标的第一名必须为本公司");
                        } else {
                            submit();
                        }
                    } else {
                        if (bidCompany == "999999") {
                            myToast("未中标的第一名不能为本公司");
                        } else {
                            submit();
                        }
                    }
                    function submit() {
                        myLoading();
                        $.ajax(global.apiURL + '/project/user/bidProject.htm', {
                            data : {
                                projectId : that.projectId,
                                passed: obj.passed
                            },
                            dataType : 'json',
                            type : 'post',
                            success : function(data){
                                if (data.success) {
                                    myOpenWindow("list.html", "list");
                                } else {
                                    myToast(data.resultMsg);
                                }
                                myLoadingOver();
                            },
                            error : function() {
                                myLoadingOver();
                                myToast("服务器正忙，请稍后重试！");
                            }
                        });
                    }
                },
                // step300提交申请
                step300Submit: function () {
                    var that = this
                    if (jQuery(".downLoad-9").text().indexOf("未上传") >= 0) {
                        myToast("请上传合同拟定版");
                    } else {
                        myLoading();
                        $.ajax(global.apiURL + '/project/user/uploadContract.htm', {
                            data : {
                                id : that.id
                            },
                            dataType : 'json',
                            type : 'post',
                            success : function(data){
                                if (data.success) {
                                    myOpenWindow("list.html", "list");
                                } else {
                                    myToast(data.resultMsg);
                                }
                                myLoadingOver();
                            },
                            error : function() {
                                myLoadingOver();
                                myToast("服务器正忙，请稍后重试！");
                            }
                        });
                    }
                },
                // step310提交申请
                step310SubmitTrue: function () {
                    var that = this;
                    var obj = {};
                    obj.status = 1;
                    var ischief = "";
                    var btnArray = ['是', '否'];

                    mui.confirm('是否需要总工审核？', "提示", btnArray, function(e) {
                        if (e.index == 1) {
                            ischief = 2;
                        } else {
                            ischief = 1;
                        }
                        funTemp()
                    })
                    // myConfirm('是否需要总工审核？', success, fail);
                    // function success() {
                    //     ischief = 2;

                    // }
                    // function fail() {
                    //     ischief = 1;
                    //     funTemp()
                    // }
                    function funTemp() {
                        myLoading();
                        $.ajax(global.apiURL + '/manageAudit/user/updateManageAudit.htm', {
                            data : {
                                projectId : that.projectId,
                                step : that.step,
                                status: obj.status ,
                                ischief : ischief,
                                type: 49,
                                memo : obj.memo
                            },
                            dataType : 'json',
                            type : 'post',
                            success : function(data){
                                if (data.success) {
                                    myOpenWindow("list.html", "list");
                                } else {
                                    //myToast(data.resultMsg);
                                }
                                myLoadingOver();
                            },
                            error : function() {
                                myLoadingOver();
                                myToast("服务器正忙，请稍后重试！");
                            }
                        });
                    }
                },
                step310SubmitFalse: function () {
                    var that = this;
                    var obj = {};
                    obj.status  = 2;
                    var btnArray = ['返回', '提交'];
                    mui.prompt('请输入不通过理由', '', '提示', btnArray, function(e) {
                        if (e.index == 1) {
                            obj.memo = e.value;
                            myLoading();
                            $.ajax(global.apiURL + '/manageAudit/user/updateManageAudit.htm', {
                                data : {
                                    projectId : that.projectId,
                                    step : that.listStep,
                                    status: obj.status,
                                    type: 49,
                                    memo : obj.memo
                                },
                                dataType : 'json',
                                type : 'post',
                                success : function(data){
                                    if (data.success) {
                                        myOpenWindow("list.html", "list");
                                    } else {
                                        //myToast(data.resultMsg);
                                    }
                                    myLoadingOver();
                                },
                                error : function() {
                                    myLoadingOver();
                                    myToast("服务器正忙，请稍后重试！");
                                }
                            });
                        }
                    })
                },
                // step315提交申请
                step315SubmitTrue: function () {
                    var that = this
                    var obj = {};
                    obj.status = 1;
                    obj.memo = "";
                    myLoading();
                    $.ajax(global.apiURL + '/chiefAudit/user/updateChiefAuditById.htm', {
                        data : {
                            projectId : that.projectId,
                            step : that.listStep,
                            status: obj.status ,
                            type: 77,
                            isMajorProject: that.isMajorProject,
                            memo : obj.memo
                        },
                        dataType : 'json',
                        type : 'post',
                        success : function(data){
                            if (data.success) {
                                myOpenWindow("list.html", "list");
                            } else {
                                myToast(data.resultMsg);
                            }
                            myLoadingOver();
                        },
                        error : function() {
                            myLoadingOver();
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                step315SubmitFalse: function () {
                    var that = this;
                    var obj = {};
                    obj.status  = 2;
                    var btnArray = ['返回', '提交'];
                    mui.prompt('请输入不通过理由', '', '提示', btnArray, function(e) {
                        if (e.index == 1) {
                            obj.memo = e.value;
                            myLoading();
                            $.ajax(global.apiURL + '/chiefAudit/user/updateChiefAuditById.htm', {
                                data : {
                                    projectId : that.projectId,
                                    step : that.listStep,
                                    status: obj.status,
                                    type: 77,
                                    isMajorProject: that.isMajorProject,
                                    memo : obj.memo
                                },
                                dataType : 'json',
                                type : 'post',
                                success : function(data){
                                    if (data.success) {
                                        myOpenWindow("list.html", "list");
                                    } else {
                                        myToast(data.resultMsg);
                                    }
                                    myLoadingOver();
                                },
                                error : function() {
                                    myLoadingOver();
                                    myToast("服务器正忙，请稍后重试！");
                                }
                            });
                        }
                    })
                },
                // step320提交申请
                step320SubmitTrue: function () {
                    var that = this;
                    var obj = {};
                    obj.status = 1;
                    if (!that.step) {
                        that.step = "";
                    }

                    myLoading();
                    $.ajax(global.apiURL + '/leaderAudit/user/updateLeaderAudit.htm', {
                        data : {
                            projectId : that.projectId,
                            step : that.listStep,
                            status: obj.status ,
                            type: 72,
                            memo : obj.memo
                        },
                        dataType : 'json',
                        type : 'post',
                        success : function(data){
                            if (data.success) {
                                myOpenWindow("list.html", "list");
                            } else {
                                //myToast(data.resultMsg);
                            }
                            myLoadingOver();
                        },
                        error : function() {
                            myLoadingOver();
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                step320SubmitFalse: function () {
                    var that = this;
                    var obj = {};
                    obj.status  = 2;
                    if (!that.step) {
                        that.step = "";
                    }
                    var btnArray = ['返回', '提交'];
                    mui.prompt('请输入不通过理由', '', '提示', btnArray, function(e) {
                        if (e.index == 1) {
                            obj.memo = e.value;
                            myLoading();
                            $.ajax(global.apiURL + '/leaderAudit/user/updateLeaderAudit.htm', {
                                data : {
                                    projectId : that.projectId,
                                    step : that.listStep,
                                    status: obj.status ,
                                    type: 72,
                                    memo : obj.memo
                                },
                                dataType : 'json',
                                type : 'post',
                                success : function(data){
                                    if (data.success) {
                                        myOpenWindow("list.html", "list");
                                    } else {
                                        //myToast(data.resultMsg);
                                    }
                                    myLoadingOver();
                                },
                                error : function() {
                                    myLoadingOver();
                                    myToast("服务器正忙，请稍后重试！");
                                }
                            });
                        }
                    })
                },
                // step330提交申请
                step330SubmitTrue: function () {
                    var that = this;
                    var obj = {};
                    obj.status = 1;
                    if (!that.step) {
                        that.step = "";
                    }
                    obj.memo = "";

                    myLoading();
                    $.ajax(global.apiURL + '/financialAudit/user/updateChiefAuditById.htm', {
                        data : {
                            projectId : that.projectId,
                            step : that.step,
                            status: obj.status ,
                            type: 27,
                            memo : obj.memo
                        },
                        dataType : 'json',
                        type : 'post',
                        success : function(data){
                            if (data.success) {
                                myOpenWindow("list.html", "list");
                            } else {
                                //myToast(data.resultMsg);
                            }
                            myLoadingOver();
                        },
                        error : function() {
                            myLoadingOver();
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                step330SubmitFalse: function () {
                    var that = this;
                    var obj = {};
                    obj.status  = 2;
                    if (!that.step) {
                        that.step = "";
                    }
                    var btnArray = ['返回', '提交'];
                    mui.prompt('请输入不通过理由', '', '提示', btnArray, function(e) {
                        if (e.index == 1) {
                            obj.memo = e.value;
                            myLoading();
                            $.ajax(global.apiURL + '/financialAudit/user/updateChiefAuditById.htm', {
                                data : {
                                    projectId : that.projectId,
                                    step : that.step,
                                    status: obj.status ,
                                    type: 27,
                                    memo : obj.memo
                                },
                                dataType : 'json',
                                type : 'post',
                                success : function(data){
                                    if (data.success) {
                                        myOpenWindow("list.html", "list");
                                    } else {
                                        //myToast(data.resultMsg);
                                    }
                                    myLoadingOver();
                                },
                                error : function() {
                                    myLoadingOver();
                                    myToast("服务器正忙，请稍后重试！");
                                }
                            });
                        }
                    })
                },
                // step340提交申请
                step340SubmitTrue: function () {
                    var that = this;
                    var obj = {};
                    obj.status = 1;
                    if (!that.step) {
                        that.step = "";
                    }
                    obj.memo = "";

                    myLoading();
                    $.ajax(global.apiURL + '/lawAudit/user/updateLawAudit.htm', {
                        data : {
                            projectId : that.projectId,
                            step : that.step,
                            status: obj.status ,
                            type: 73,
                            memo : obj.memo
                        },
                        dataType : 'json',
                        type : 'post',
                        success : function(data){
                            if (data.success) {
                                myOpenWindow("list.html", "list");
                            } else {
                                //myToast(data.resultMsg);
                            }
                            myLoadingOver();
                        },
                        error : function() {
                            myLoadingOver();
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                step340SubmitFalse: function () {
                    var that = this;
                    var obj = {};
                    obj.status  = 2;
                    if (!that.step) {
                        that.step = "";
                    }
                    var btnArray = ['返回', '提交'];
                    mui.prompt('请输入不通过理由', '', '提示', btnArray, function(e) {
                        if (e.index == 1) {
                            obj.memo = e.value;
                            myLoading();
                            $.ajax(global.apiURL + '/lawAudit/user/updateLawAudit.htm', {
                                data : {
                                    projectId : that.projectId,
                                    step : that.step,
                                    status: obj.status ,
                                    type: 43,
                                    memo : obj.memo
                                },
                                dataType : 'json',
                                type : 'post',
                                success : function(data){
                                    if (data.success) {
                                        myOpenWindow("list.html", "list");
                                    } else {
                                        //myToast(data.resultMsg);
                                    }
                                    myLoadingOver();
                                },
                                error : function() {
                                    myLoadingOver();
                                    myToast("服务器正忙，请稍后重试！");
                                }
                            });
                        }
                    })
                },
                // step350提交申请
                step350SubmitTrue: function () {
                    var that = this;
                    var obj = {};
                    obj.status = 1;
                    if (!that.step) {
                        that.step = "";
                    }

                    myLoading();
                    $.ajax(global.apiURL + '/officeAudit/user/updateOfficeAuditById.htm', {
                        data : {
                            projectId : that.projectId,
                            step : that.step,
                            status: obj.status ,
                            type: 55,
                            memo : obj.memo
                        },
                        dataType : 'json',
                        type : 'post',
                        success : function(data){
                            if (data.success) {
                                myOpenWindow("list.html", "list");
                            } else {
                                //myToast(data.resultMsg);
                            }
                            myLoadingOver();
                        },
                        error : function() {
                            myLoadingOver();
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                step350SubmitFalse: function () {
                    var that = this;
                    var obj = {};
                    obj.status  = 2;
                    if (!that.step) {
                        that.step = "";
                    }
                    var btnArray = ['返回', '提交'];
                    mui.prompt('请输入不通过理由', '', '提示', btnArray, function(e) {
                        if (e.index == 1) {
                            obj.memo = e.value;
                            myLoading();
                            $.ajax(global.apiURL + '/officeAudit/user/updateOfficeAuditById.htm', {
                                data : {
                                    projectId : that.projectId,
                                    step : that.step,
                                    status: obj.status ,
                                    type: 55,
                                    memo : obj.memo
                                },
                                dataType : 'json',
                                type : 'post',
                                success : function(data){
                                    if (data.success) {
                                        myOpenWindow("list.html", "list");
                                    } else {
                                        //myToast(data.resultMsg);
                                    }
                                    myLoadingOver();
                                },
                                error : function() {
                                    myLoadingOver();
                                    myToast("服务器正忙，请稍后重试！");
                                }
                            });
                        }
                    })
                },
                // step360提交申请
                step360Submit: function () {
                    var that = this
                    var obj = {};
                    obj.status = 1;
                    myLoading();
                    $.ajax(global.apiURL + '/administrativeSeal/user/updateAdministrativeSeal.htm', {
                        data : {
                            projectId : that.projectId,
                            step : that.step,
                            status: obj.status ,
                            type: 36,
                            subStep : that.subStep,
                            step : that.step
                        },
                        dataType : 'json',
                        type : 'post',
                        success : function(data){
                            if (data.success) {
                                myOpenWindow("list.html", "list");
                            } else {
                                myToast(data.resultMsg);
                            }
                            myLoadingOver();
                        },
                        error : function() {
                            myLoadingOver();
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                // step370提交申请
                step370Submit: function () {
                    var that = this

                    // if (that.obj.contract) {
                    //     if (jQuery(".downLoad-10").text().indexOf("未上传") >= 0) {
                    //         myToast("请上传合同文件");
                    //     } else {
                    //         myLoading();
                    //         $.ajax(global.apiURL + '/project/user/updConfirmContract.htm', {
                    //             data : {
                    //                 id : that.id
                    //             },
                    //             dataType : 'json',
                    //             type : 'post',
                    //             success : function(data){
                    //                 if (data.success) {
                    //                     myOpenWindow("list.html", "list");
                    //                 } else {
                    //                     //myToast(data.resultMsg);
                    //                 }
                    //                 myLoadingOver();
                    //             },
                    //             error : function() {
                    //                 myLoadingOver();
                    //                 myToast("服务器正忙，请稍后重试！");
                    //             }
                    //         });
                    //     }
                    // } else {


                    var obj = {};
                    var type = [];
                    var value = [];
                    var values = 0;
                    obj.contractNo = jQuery("#contract_no").val()
                    obj.projectName = jQuery("#name").val();
                    obj.contractCapital = jQuery("#contract_capital").val();
                    obj.address = jQuery("#address").val();
                    obj.designArea = jQuery("#designArea").val();
                    obj.investmentMount = jQuery("#investmentMount").val();
                    if (jQuery("#haveScheme").is(":checked")) {
                       obj.haveScheme = 1;
                    } else {
                        obj.haveScheme = 0;
                    }
                    if (jQuery("#haveDevelopment").is(":checked")) {
                       obj.haveDevelopment = 1;
                    } else {
                        obj.haveDevelopment = 0;
                    }
                    if (jQuery("#haveDrawing").is(":checked")) {
                       obj.haveDrawing = 1;
                    } else {
                        obj.haveDrawing = 0;
                    }
                    if (jQuery("#havePlanning").is(":checked")) {
                       obj.havePlanning = 1;
                    } else {
                        obj.havePlanning = 0;
                    }
                    obj.contractMemo = jQuery("#contractMemo").val();
                    if (that.obj.sign_date) {
                        obj.signDate = that.obj.sign_date;
                    } else {
                        obj.signDate = that.obj.signDate;
                    }

                    // 验证合同
                    if (!obj.projectName) {
                        myToast("请输入项目名称");
                    } else if (!obj.contractCapital) {
                        myToast("请输入合同金额");
                    } else if (!obj.signDate) {
                        myToast("请选择签约日期");
                    } else if (!obj.designArea) {
                        myToast("请输入设计面积");
                    } else if (!obj.investmentMount) {
                        myToast("请输入投资额");
                    } else if (!jQuery("#payType dd").length) {
                        myToast("请添加付款方式");
                    } else if (jQuery("#payType dd").length) {
                        jQuery("#payType dd").each(function () {
                            type.push(jQuery(this).attr("id"))
                            value.push(jQuery(this).find("input").val())
                        });
                        for (var i = 0; i < type.length; i++) {
                            if (type[i] == undefined) {
                                myToast("请选择付款方式");
                                return;
                            } else if (!value[i]) {
                                myToast("请输入付款金额");
                                return;
                            } else if (tempFun(type)) {
                                myToast("付款方式不能相同");
                                return;
                            } else {
                                values += Number(value[i]);
                            }
                        }
                        if (values != jQuery("#contract_capital").val()) {
                            myToast("付款方式总额必须等于合同金额");
                            return;
                        } else {
                            obj.type = type.join(",");
                            obj.value = value.join(",");
                        }
                        function tempFun(a){
                           return /(\x0f[^\x0f]+)\x0f[\s\S]*\1/.test("\x0f"+a.join("\x0f\x0f") +"\x0f");
                        }
                        if (obj.projectName != that.obj.contract_name || obj.contractCapital != that.obj.contract_category || that.obj.contractAwardCompany != that.obj.contract_contractAwardCompany || that.obj.category != that.obj.contract_category || that.obj.type != that.obj.contract_type || that.obj.city != that.obj.contract_city || obj.address != that.obj.contract_address || obj.designArea != that.obj.contract_designArea || obj.investmentMount != that.obj.contract_investmentMount || obj.haveDevelopment != that.obj.contract_haveDevelopment || obj.haveDrawing != that.obj.contract_haveDrawing || obj.havePlanning != that.obj.contract_havePlanning || obj.haveScheme != that.obj.contract_haveScheme) {
                            obj.projectUpdate = 1;
                        } else {
                            obj.projectUpdate = 0;
                        }
                        if (obj.contractCapital != that.obj.contract_capital || that.obj.signDate != that.obj.sign_date || that.contractMemo != that.obj.contractMemo) {
                            obj.contractUpdate = 1;
                        } else {
                            obj.contractUpdate = 0;
                        }
                        obj.paymentUpdateString = "";
                        jQuery("#payType dd").each(function () {
                            obj.paymentUpdateString += jQuery(this).find("span").html() + jQuery(this).find("input").val();
                        });
                        if (obj.paymentUpdateString != that.obj.paymentUpdate) {
                            obj.paymentUpdate = 1;
                        } else {
                            obj.paymentUpdate = 0;
                        }
                        if (jQuery(".downLoad-10").text().indexOf("未上传") >= 0) {
                            myToast("请上传合同文件");
                        } else {
                            if (that.obj.contract) {
                                // 合同信息有值为修改
                                modify();
                            } else {
                                // 合同信息没值，验证后提交
                                submit();
                            }
                        }
                    }
                    function submit() {
                        // if (jQuery(".downLoad-10").text().indexOf("未上传") >= 0) {
                        //     myToast("请上传合同文件");
                        // } else {
                            myLoading();
                            $.ajax(global.apiURL + '/contract/user/insertContract.htm', {
                                data : {
                                    projectId : that.id,
                                    contractNo : obj.contractNo,
                                    projectName : obj.projectName,
                                    contractCapital : obj.contractCapital,
                                    signDate : obj.signDate,
                                    companyName : that.obj.contractAwardCompany,
                                    category : that.obj.category,
                                    type : that.obj.type,
                                    city : that.obj.city,
                                    address : obj.address,
                                    designArea : obj.designArea,
                                    investmentMount : obj.investmentMount,
                                    haveScheme : obj.haveScheme,
                                    haveDevelopment : obj.haveDevelopment,
                                    haveDrawing : obj.haveDrawing,
                                    havePlanning : obj.havePlanning,
                                    paymentType: obj.type,
                                    paymentPrice: obj.value,
                                    contractMemo : obj.contractMemo,
                                    projectUpdate : obj.projectUpdate
                                },
                                dataType : 'json',
                                type : 'post',
                                success : function(data){
                                    if (data.success) {
                                        myLoading();
                                        $.ajax(global.apiURL + '/project/user/updConfirmContract.htm', {
                                            data : {
                                                id : that.id
                                            },
                                            dataType : 'json',
                                            type : 'post',
                                            success : function(data){
                                                if (data.success) {
                                                    myOpenWindow("list.html", "list");
                                                } else {
                                                    //myToast(data.resultMsg);
                                                }
                                                myLoadingOver();
                                            },
                                            error : function() {
                                                myLoadingOver();
                                                myToast("服务器正忙，请稍后重试！");
                                            }
                                        });
                                    } else {
                                        //myToast(data.resultMsg);
                                    }
                                    myLoadingOver();
                                },
                                error : function() {
                                    myLoadingOver();
                                    myToast("服务器正忙，请稍后重试！");
                                }
                            });
                        //}
                    }
                    function modify() {
                        // if (jQuery(".downLoad-10").text().indexOf("未上传") >= 0) {
                        //     myToast("请上传合同文件");
                        // } else {
                            myLoading();
                            $.ajax(global.apiURL + '/contract/user/updateContract.htm', {
                                data : {
                                    id : that.obj.contractId,
                                    projectId : that.id,
                                    contractNo : obj.contractNo,
                                    projectName : obj.projectName,
                                    contractCapital : obj.contractCapital,
                                    signDate : obj.signDate,
                                    companyName : that.obj.contractAwardCompany,
                                    category : that.obj.category,
                                    type : that.obj.type,
                                    city : that.obj.city,
                                    address : obj.address,
                                    designArea : obj.designArea,
                                    investmentMount : obj.investmentMount,
                                    haveScheme : obj.haveScheme,
                                    haveDevelopment : obj.haveDevelopment,
                                    haveDrawing : obj.haveDrawing,
                                    havePlanning : obj.havePlanning,
                                    paymentType: obj.type,
                                    paymentPrice: obj.value,
                                    contractMemo : obj.contractMemo,
                                    projectUpdate : 0,
                                    contractUpdate : obj.contractUpdate,
                                    paymentUpdate : obj.paymentUpdate,
                                    contractVersion : that.obj.contractVersion
                                },
                                dataType : 'json',
                                type : 'post',
                                success : function(data){
                                    if (data.success) {
                                        myLoading();
                                        $.ajax(global.apiURL + '/project/user/updConfirmContract.htm', {
                                            data : {
                                                id : that.id
                                            },
                                            dataType : 'json',
                                            type : 'post',
                                            success : function(data){
                                                if (data.success) {
                                                    myOpenWindow("list.html", "list");
                                                } else {
                                                    //myToast(data.resultMsg);
                                                }
                                                myLoadingOver();
                                            },
                                            error : function() {
                                                myLoadingOver();
                                                myToast("服务器正忙，请稍后重试！");
                                            }
                                        });
                                    } else {
                                        //myToast(data.resultMsg);
                                    }
                                    myLoadingOver();
                                },
                                error : function() {
                                    myLoadingOver();
                                    myToast("服务器正忙，请稍后重试！");
                                }
                            });
                        //}
                    }
                },
                // step380提交申请
                step380Submit: function () {
                    var that = this
                    var obj = {};
                    obj.ratio = jQuery("#ratio").val();
                    if (that.obj.ratio == obj.ratio) {
                        obj.ratio = "";
                    }
                    obj.ratioMemo = jQuery("#ratio_memo").val();
                    myLoading();
                    $.ajax(global.apiURL + '/contract/user/applyRatio.htm', {
                        data : {
                            step : that.step,
                            contractCapital: that.obj.contractCapital,
                            projectId : that.id,
                            ratio : obj.ratio,
                            ratioMemo : obj.ratioMemo,
                            contractNo : that.obj.contractNo
                        },
                        dataType : 'json',
                        type : 'post',
                        success : function(data){
                            if (data.success) {
                                myOpenWindow("list.html", "list");
                            } else {
                                myToast(data.resultMsg);
                            }
                            myLoadingOver();
                        },
                        error : function() {
                            myLoadingOver();
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                // step390提交申请
                step390SubmitTrue: function () {
                    var that = this;
                    var obj = {};
                    obj.status = 1;
                    myLoading();
                    $.ajax(global.apiURL + '/officeAudit/user/updateOfficeAuditById.htm', {
                        data : {
                            projectId : that.projectId,
                            step : that.step,
                            status: obj.status ,
                            type: 56,
                            memo : obj.memo
                        },
                        dataType : 'json',
                        type : 'post',
                        success : function(data){
                            if (data.success) {
                                myOpenWindow("list.html", "list");
                            } else {
                                myToast(data.resultMsg);
                            }
                            myLoadingOver();
                        },
                        error : function() {
                            myLoadingOver();
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                step390SubmitFalse: function () {
                    var that = this;
                    var obj = {};
                    obj.status  = 2;
                    var btnArray = ['返回', '提交'];
                    mui.prompt('请输入不通过理由', '', '提示', btnArray, function(e) {
                        if (e.index == 1) {
                            obj.memo = e.value;
                            myLoading();
                            $.ajax(global.apiURL + '/officeAudit/user/updateOfficeAuditById.htm', {
                                data : {
                                    projectId : that.projectId,
                                    step : that.step,
                                    status: obj.status,
                                    type: 56,
                                    memo : obj.memo
                                },
                                dataType : 'json',
                                type : 'post',
                                success : function(data){
                                    if (data.success) {
                                        myOpenWindow("list.html", "list");
                                    } else {
                                        myToast(data.resultMsg);
                                    }
                                    myLoadingOver();
                                },
                                error : function() {
                                    myLoadingOver();
                                    myToast("服务器正忙，请稍后重试！");
                                }
                            });
                        }
                    })
                },
                // step400提交申请
                step400Submit: function () {
                    var that = this
                    if (jQuery(".downLoad-11").text().indexOf("未上传") >= 0) {
                        myToast("请上传方案设计初稿")
                    } else {
                        myLoading();
                        $.ajax(global.apiURL + '/project/user/shemaFileChiefUpd.htm', {
                            data : {
                                id : that.id,
                                type: 58
                            },
                            dataType : 'json',
                            type : 'post',
                            success : function(data){
                                if (data.success) {
                                    myOpenWindow("list.html", "list");
                                } else {
                                    myToast(data.resultMsg);
                                }
                                myLoadingOver();
                            },
                            error : function() {
                                myLoadingOver();
                                myToast("服务器正忙，请稍后重试！");
                            }
                        });
                    }
                },
                // step410提交申请
                step410SubmitTrue: function () {
                    var that = this;
                    var obj = {};
                    obj.status = 1;
                    obj.memo = "";
                    myLoading();
                    $.ajax(global.apiURL + '/chiefAudit/user/updateChiefAuditById.htm', {
                        data : {
                            projectId : that.projectId,
                            step : that.step,
                            status: obj.status ,
                            type: 58,
                            isMajorProject: that.isMajorProject,
                            memo : obj.memo
                        },
                        dataType : 'json',
                        type : 'post',
                        success : function(data){
                            if (data.success) {
                                myOpenWindow("list.html", "list");
                            } else {
                                myToast(data.resultMsg);
                            }
                            myLoadingOver();
                        },
                        error : function() {
                            myLoadingOver();
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                step410SubmitFalse: function () {
                    var that = this;
                    var obj = {};
                    obj.status  = 2;

                    var btnArray = ['返回', '提交'];
                    mui.prompt('请输入不通过理由', '', '提示', btnArray, function(e) {
                        if (e.index == 1) {
                            obj.memo = e.value;
                            myLoading();
                            $.ajax(global.apiURL + '/chiefAudit/user/updateChiefAuditById.htm', {
                                data : {
                                    projectId : that.projectId,
                                    step : that.step,
                                    status: obj.status ,
                                    type: 58,
                                    isMajorProject: isMajorProject,
                                    memo : obj.memo
                                },
                                dataType : 'json',
                                type : 'post',
                                success : function(data){
                                    if (data.success) {
                                        myOpenWindow("list.html", "list");
                                    } else {
                                        //myToast(data.resultMsg);
                                    }
                                    myLoadingOver();
                                },
                                error : function() {
                                    myLoadingOver();
                                    myToast("服务器正忙，请稍后重试！");
                                }
                            });
                        }
                    })
                },
                // step420提交申请
                step420Submit: function () {
                    var that = this
                    if (jQuery(".downLoad-12").text().indexOf("未上传") >= 0) {
                        myToast("请上传方案设计");
                    } else {
                        myLoading();
                        $.ajax(global.apiURL + '/project/user/schemaFileUpd.htm', {
                            data : {
                                id : that.id
                            },
                            dataType : 'json',
                            type : 'post',
                            success : function(data){
                                if (data.success) {
                                    myOpenWindow("list.html", "list");
                                } else {
                                    myToast(data.resultMsg);
                                }
                                myLoadingOver();
                            },
                            error : function() {
                                myLoadingOver();
                                myToast("服务器正忙，请稍后重试！");
                            }
                        });
                    }
                },
                // step430提交申请
                step430Submit: function () {
                    var that = this
                    if (jQuery(".downLoad-14").text().indexOf("未上传") >= 0) {
                        myToast("请上传扩初方案设计初稿")
                    } else {
                        myLoading();
                        $.ajax(global.apiURL + '/project/user/shemaFileChiefUpd.htm', {
                            data : {
                                id : that.id,
                                type: 59
                            },
                            dataType : 'json',
                            type : 'post',
                            success : function(data){
                                if (data.success) {
                                    myOpenWindow("list.html", "list");
                                } else {
                                    myToast(data.resultMsg);
                                }
                                myLoadingOver();
                            },
                            error : function() {
                                myLoadingOver();
                                myToast("服务器正忙，请稍后重试！");
                            }
                        });
                    }
                },
                // step440提交申请
                step440SubmitTrue: function () {
                    var that = this;
                    var obj = {};
                    obj.status = 1;
                    obj.memo = "";
                    myLoading();
                    $.ajax(global.apiURL + '/chiefAudit/user/updateChiefAuditById.htm', {
                        data : {
                            projectId : that.projectId,
                            step : that.step,
                            status: obj.status ,
                            type: 59,
                            isMajorProject: that.isMajorProject,
                            memo : obj.memo
                        },
                        dataType : 'json',
                        type : 'post',
                        success : function(data){
                            if (data.success) {
                                myOpenWindow("list.html", "list");
                            } else {
                                myToast(data.resultMsg);
                            }
                            myLoadingOver();
                        },
                        error : function() {
                            myLoadingOver();
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                step440SubmitFalse: function () {
                    var that = this;
                    var obj = {};
                    obj.status  = 2;
                    if (!that.subStep2) {
                        that.subStep2 = "";
                    }
                    var btnArray = ['返回', '提交'];
                    mui.prompt('请输入不通过理由', '', '提示', btnArray, function(e) {
                        if (e.index == 1) {
                            obj.memo = e.value;
                            myLoading();
                            $.ajax(global.apiURL + '/chiefAudit/user/updateChiefAuditById.htm', {
                                data : {
                                    projectId : that.projectId,
                                    step : that.step,
                                    status: obj.status ,
                                    type: 59,
                                    isMajorProject: isMajorProject,
                                    memo : obj.memo
                                },
                                dataType : 'json',
                                type : 'post',
                                success : function(data){
                                    if (data.success) {
                                        myOpenWindow("list.html", "list");
                                    } else {
                                        //myToast(data.resultMsg);
                                    }
                                    myLoadingOver();
                                },
                                error : function() {
                                    myLoadingOver();
                                    myToast("服务器正忙，请稍后重试！");
                                }
                            });
                        }
                    })
                },
                // step450提交申请
                step450Submit: function () {
                    var that = this
                    if (jQuery(".downLoad-15").text().indexOf("未上传") >= 0) {
                        myToast("请上传扩初成果");
                    } else {
                        myLoading();
                        $.ajax(global.apiURL + '/project/user/schemaFileUpd.htm', {
                            data : {
                                id : that.id
                            },
                            dataType : 'json',
                            type : 'post',
                            success : function(data){
                                if (data.success) {
                                    myOpenWindow("list.html", "list");
                                } else {
                                    myToast(data.resultMsg);
                                }
                                myLoadingOver();
                            },
                            error : function() {
                                myLoadingOver();
                                myToast("服务器正忙，请稍后重试！");
                            }
                        });
                    }
                },
                // step460提交申请
                step460Submit: function () {
                    var that = this
                    if (jQuery(".downLoad-17").text().indexOf("未上传") >= 0) {
                        myToast("请上传施工初稿");
                    } else {
                        myLoading();
                        $.ajax(global.apiURL + '/project/user/shemaFileChiefUpd.htm', {
                            data : {
                                id : that.id,
                                type: 60
                            },
                            dataType : 'json',
                            type : 'post',
                            success : function(data){
                                if (data.success) {
                                    myOpenWindow("list.html", "list");
                                } else {
                                    myToast(data.resultMsg);
                                }
                                myLoadingOver();
                            },
                            error : function() {
                                myLoadingOver();
                                myToast("服务器正忙，请稍后重试！");
                            }
                        });
                    }
                },
                // step470提交申请
                step470SubmitTrue: function () {
                    var that = this;
                    var obj = {};
                    obj.status = 1;
                    obj.memo = "";
                    myLoading();
                    $.ajax(global.apiURL + '/chiefAudit/user/updateChiefAuditById.htm', {
                        data : {
                            projectId : that.projectId,
                            step : that.step,
                            status: obj.status ,
                            type: 60,
                            isMajorProject: that.isMajorProject,
                            memo : obj.memo
                        },
                        dataType : 'json',
                        type : 'post',
                        success : function(data){
                            if (data.success) {
                                myOpenWindow("list.html", "list");
                            } else {
                                myToast(data.resultMsg);
                            }
                            myLoadingOver();
                        },
                        error : function() {
                            myLoadingOver();
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                step470SubmitFalse: function () {
                    var that = this;
                    var obj = {};
                    obj.status  = 2;
                    if (!that.subStep2) {
                        that.subStep2 = "";
                    }
                    var btnArray = ['返回', '提交'];
                    mui.prompt('请输入不通过理由', '', '提示', btnArray, function(e) {
                        if (e.index == 1) {
                            obj.memo = e.value;
                            myLoading();
                            $.ajax(global.apiURL + '/chiefAudit/user/updateChiefAuditById.htm', {
                                data : {
                                    projectId : that.projectId,
                                    subStep2 : that.subStep2,
                                    status: obj.status ,
                                    type: 60,
                                    isMajorProject: isMajorProject,
                                    memo : obj.memo
                                },
                                dataType : 'json',
                                type : 'post',
                                success : function(data){
                                    if (data.success) {
                                        myOpenWindow("list.html", "list");
                                    } else {
                                        //myToast(data.resultMsg);
                                    }
                                    myLoadingOver();
                                },
                                error : function() {
                                    myLoadingOver();
                                    myToast("服务器正忙，请稍后重试！");
                                }
                            });
                        }
                    })
                },
                // step480提交申请
                step480Submit: function () {
                    var that = this
                    if (jQuery(".downLoad-18").text().indexOf("未上传") >= 0) {
                        myToast("请上传施工成果");
                    } else {
                        myLoading();
                        $.ajax(global.apiURL + '/project/user/schemaFileUpd.htm', {
                            data : {
                                id : that.id
                            },
                            dataType : 'json',
                            type : 'post',
                            success : function(data){
                                if (data.success) {
                                    myOpenWindow("list.html", "list");
                                } else {
                                    myToast(data.resultMsg);
                                }
                                myLoadingOver();
                            },
                            error : function() {
                                myLoadingOver();
                                myToast("服务器正忙，请稍后重试！");
                            }
                        });
                    }
                },
                // step490提交申请
                step490Submit: function () {
                    var that = this
                    if (jQuery(".downLoad-20").text().indexOf("未上传") >= 0) {
                        myToast("请上传规划初稿");
                    } else {
                        myLoading();
                        $.ajax(global.apiURL + '/project/user/shemaFileChiefUpd.htm', {
                            data : {
                                id : that.id,
                                type: 61
                            },
                            dataType : 'json',
                            type : 'post',
                            success : function(data){
                                if (data.success) {
                                    myOpenWindow("list.html", "list");
                                } else {
                                    myToast(data.resultMsg);
                                }
                                myLoadingOver();
                            },
                            error : function() {
                                myLoadingOver();
                                myToast("服务器正忙，请稍后重试！");
                            }
                        });
                    }
                },
                // step500提交申请
                step500SubmitTrue: function () {
                    var that = this;
                    var obj = {};
                    obj.status = 1;
                    obj.memo = "";
                    myLoading();
                    $.ajax(global.apiURL + '/chiefAudit/user/updateChiefAuditById.htm', {
                        data : {
                            projectId : that.projectId,
                            step : that.step,
                            status: obj.status ,
                            type: 61,
                            isMajorProject: that.isMajorProject,
                            memo : obj.memo
                        },
                        dataType : 'json',
                        type : 'post',
                        success : function(data){
                            if (data.success) {
                                myOpenWindow("list.html", "list");
                            } else {
                                myToast(data.resultMsg);
                            }
                            myLoadingOver();
                        },
                        error : function() {
                            myLoadingOver();
                            myToast("服务器正忙，请稍后重试！");
                        }
                    });
                },
                step500SubmitFalse: function () {
                    var that = this;
                    var obj = {};
                    obj.status  = 2;
                    var btnArray = ['返回', '提交'];
                    mui.prompt('请输入不通过理由', '', '提示', btnArray, function(e) {
                        if (e.index == 1) {
                            obj.memo = e.value;
                            myLoading();
                            $.ajax(global.apiURL + '/chiefAudit/user/updateChiefAuditById.htm', {
                                data : {
                                    projectId : that.projectId,
                                    subStep : that.subStep,
                                    status: obj.status ,
                                    type: 61,
                                    isMajorProject: isMajorProject,
                                    memo : obj.memo
                                },
                                dataType : 'json',
                                type : 'post',
                                success : function(data){
                                    if (data.success) {
                                        myOpenWindow("list.html", "list");
                                    } else {
                                        //myToast(data.resultMsg);
                                    }
                                    myLoadingOver();
                                },
                                error : function() {
                                    myLoadingOver();
                                    myToast("服务器正忙，请稍后重试！");
                                }
                            });
                        }
                    })
                },
                // step510提交申请
                step510Submit: function () {
                    var that = this
                    if (jQuery(".downLoad-21").text().indexOf("未上传") >= 0) {
                        myToast("请上传规划成果");
                    } else {
                        myLoading();
                        $.ajax(global.apiURL + '/project/user/schemaFileUpd.htm', {
                            data : {
                                id : that.id
                            },
                            dataType : 'json',
                            type : 'post',
                            success : function(data){
                                if (data.success) {
                                    myOpenWindow("list.html", "list");
                                } else {
                                    myToast(data.resultMsg);
                                }
                                myLoadingOver();
                            },
                            error : function() {
                                myLoadingOver();
                                myToast("服务器正忙，请稍后重试！");
                            }
                        });
                    }
                },
                // step520提交申请
                step520Submit: function () {
                    var that = this
                    if (jQuery(".downLoad-24").text().indexOf("未上传") >= 0) {
                        myToast("请上传竣工报告");
                    } else {
                        myLoading();
                        mui.ajax(global.apiURL + '/project/user/updateProjectStatus.htm', {
                            data : {
                                id: that.id,
                                status: 520
                            },
                            dataType : 'json',
                            type : 'post',
                            success : function(data){
                                if (data.success) {
                                    myOpenWindow("list.html", "list");
                                } else {
                                    myToast(data.resultMsg);
                                }
                            },
                            error : function() {
                                myToast("服务器正忙，请稍后重试！");
                            }
                        });
                    }
                }
            },
            mounted: function () {
                this.$nextTick(function () {
                    mui.init();
                    this.init();
                    this.getProduct();
                    this.fileUpLoad();
                    this.hideLayout();
                })
            }
        })
    </script>
</html>